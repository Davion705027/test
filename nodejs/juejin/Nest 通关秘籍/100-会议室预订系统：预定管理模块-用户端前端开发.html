<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>这节我们来写下预订管理模块的用户端。</p>
<p>把用户端代码跑起来，首先写下预订历史页面：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c48a82b4211498baaddbbb3547fca63~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1476&amp;h=884&amp;s=66779&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这个页面就是一个列表：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5243f2fa51946f192575f88c0baa822~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1136&amp;h=796&amp;s=82250&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们先写上面的 form：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">TimePicker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> <span class="hljs-string">'./booking_history.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">SearchBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">meetingRoomName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">meetingRoomPosition</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingHistory</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="18">        </span>
<span class="code-block-extension-codeLine" data-line-num="19">    }</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="22"></span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="24">        <span class="hljs-title function_">searchBooking</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="25">            <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="26">            <span class="hljs-attr">meetingRoomName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomName'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="27">            <span class="hljs-attr">meetingRoomPosition</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomPosition'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="28">            <span class="hljs-attr">rangeStartDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="29">            <span class="hljs-attr">rangeStartTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartTime'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="30">            <span class="hljs-attr">rangeEndDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="31">            <span class="hljs-attr">rangeEndTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndTime'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="32">        });</span>
<span class="code-block-extension-codeLine" data-line-num="33">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="34"></span>
<span class="code-block-extension-codeLine" data-line-num="35">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingHistory-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="36">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingHistory-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="37">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="38">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="39">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchBooking}</span></span>
<span class="code-block-extension-codeLine" data-line-num="40">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="42">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="44">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="45">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="46">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="47"></span>
<span class="code-block-extension-codeLine" data-line-num="48">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="51"></span>
<span class="code-block-extension-codeLine" data-line-num="52">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="53">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="54">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="55"></span>
<span class="code-block-extension-codeLine" data-line-num="56">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="57">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="59"></span>
<span class="code-block-extension-codeLine" data-line-num="60">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="61">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="62">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="63"></span>
<span class="code-block-extension-codeLine" data-line-num="64">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomPosition"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="65">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="66">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="67"></span>
<span class="code-block-extension-codeLine" data-line-num="68">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="69">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="70">                        搜索预定历史</span>
<span class="code-block-extension-codeLine" data-line-num="71">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="72">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="73">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="74">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="75">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="76">}</span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#bookingHistory-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-selector-id">#bookingHistory-container</span> <span class="hljs-selector-class">.bookingHistory-form</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">40px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-selector-id">#bookingHistory-container</span> <span class="hljs-selector-class">.ant-form-item</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
</code></pre>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d271754a30e8442285335cc2236ed77a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2620&amp;h=838&amp;s=92270&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>和后台管理的页面差不多，只不过这里没有 user 的搜索。</p>
<p>我们登录的时候把它放到了 localStorage 里，所以这里从 localStorage 取就行：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe82c514ecbe40bead2566a06ae1512b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1370&amp;h=442&amp;s=110671&amp;e=png&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad99206ec65d40b0af9e3e7032c6dd91~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1198&amp;h=964&amp;s=199462&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> userInfoStr = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user_info'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">if</span>(userInfoStr) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(userInfoStr);</span>
<span class="code-block-extension-codeLine" data-line-num="6">    }</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>然后在 interface.ts 写下用到的接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bookingList</span>(<span class="hljs-params">searchBooking: SearchBooking, pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-keyword">let</span> bookingTimeRangeStart;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">let</span> bookingTimeRangeEnd;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    </span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">if</span>(searchBooking.<span class="hljs-property">rangeStartDate</span> &amp;&amp; searchBooking.<span class="hljs-property">rangeStartTime</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-keyword">const</span> rangeStartDateStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeStartDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-keyword">const</span> rangeStartTimeStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeStartTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9">        bookingTimeRangeStart = <span class="hljs-title function_">dayjs</span>(rangeStartDateStr + <span class="hljs-string">' '</span> + rangeStartTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="10">    }</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-keyword">if</span>(searchBooking.<span class="hljs-property">rangeEndDate</span> &amp;&amp; searchBooking.<span class="hljs-property">rangeEndTime</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-keyword">const</span> rangeEndDateStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeEndDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-keyword">const</span> rangeEndTimeStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeEndTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="15">        bookingTimeRangeEnd = <span class="hljs-title function_">dayjs</span>(rangeEndDateStr + <span class="hljs-string">' '</span> + rangeEndTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="16">    }</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/list'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="19">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="20">            <span class="hljs-attr">username</span>: searchBooking.<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="21">            <span class="hljs-attr">meetingRoomName</span>: searchBooking.<span class="hljs-property">meetingRoomName</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="22">            <span class="hljs-attr">meetingRoomPosition</span>: searchBooking.<span class="hljs-property">meetingRoomPosition</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="23">            bookingTimeRangeStart,</span>
<span class="code-block-extension-codeLine" data-line-num="24">            bookingTimeRangeEnd,</span>
<span class="code-block-extension-codeLine" data-line-num="25">            <span class="hljs-attr">pageNo</span>: pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="26">            <span class="hljs-attr">pageSize</span>: pageSize</span>
<span class="code-block-extension-codeLine" data-line-num="27">        }</span>
<span class="code-block-extension-codeLine" data-line-num="28">    });</span>
<span class="code-block-extension-codeLine" data-line-num="29">}</span>
</code></pre>
<p>这个就是当时后台管理的接口，没啥区别。</p>
<p>然后在页面调用下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca1c9bbf016a412194147807a8c7e690~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1610&amp;h=1460&amp;s=338451&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> [bookingSearchResult, setBookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">bookingList</span>(values, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-title function_">setBookingSearchResult</span>(data.<span class="hljs-property">bookings</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: BookingSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">            <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="12">                <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">                ...item</span>
<span class="code-block-extension-codeLine" data-line-num="14">            }</span>
<span class="code-block-extension-codeLine" data-line-num="15">        }))</span>
<span class="code-block-extension-codeLine" data-line-num="16">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="17">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="18">    }</span>
<span class="code-block-extension-codeLine" data-line-num="19">}</span>
</code></pre>
<p>接口调用没啥问题：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee4234bf1f574c4584c585860a20d0d8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1416&amp;h=1098&amp;s=160749&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eaf74fa453c466180a4ca918d48b294~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1836&amp;h=1258&amp;s=243903&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后加上下面的表格：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c01c0cb2a8bf4b3e9c32b5fe0d6fd87d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1352&amp;h=1370&amp;s=205280&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc9445b2049b444fac0b17e86fd07f91~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1094&amp;h=294&amp;s=60838&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这些和后台管理一样，直接复制过来就行：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> <span class="hljs-string">'./booking_history.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { bookingList } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interface/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../meeting_room_list/MeetingRoomList"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">'dayjs'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">SearchBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">meetingRoomName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">meetingRoomPosition</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="29">}</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-keyword">const</span> userInfoStr = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user_info'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="33"></span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">if</span>(userInfoStr) {</span>
<span class="code-block-extension-codeLine" data-line-num="35">        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(userInfoStr);</span>
<span class="code-block-extension-codeLine" data-line-num="36">    }</span>
<span class="code-block-extension-codeLine" data-line-num="37">}</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingHistory</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="40">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="41">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="42">    <span class="hljs-keyword">const</span> [bookingSearchResult, setBookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="43"></span>
<span class="code-block-extension-codeLine" data-line-num="44">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="45">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">bookingList</span>(values, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="46"></span>
<span class="code-block-extension-codeLine" data-line-num="47">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="48">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-title function_">setBookingSearchResult</span>(data.<span class="hljs-property">bookings</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: BookingSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="51">                    <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="52">                    ...item</span>
<span class="code-block-extension-codeLine" data-line-num="53">                }</span>
<span class="code-block-extension-codeLine" data-line-num="54">            }))</span>
<span class="code-block-extension-codeLine" data-line-num="55">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="56">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="57">        }</span>
<span class="code-block-extension-codeLine" data-line-num="58">    }</span>
<span class="code-block-extension-codeLine" data-line-num="59"></span>
<span class="code-block-extension-codeLine" data-line-num="60">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="61"></span>
<span class="code-block-extension-codeLine" data-line-num="62">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="63">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="64">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="65">    }</span>
<span class="code-block-extension-codeLine" data-line-num="66"></span>
<span class="code-block-extension-codeLine" data-line-num="67">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="68">        <span class="hljs-title function_">searchBooking</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="69">            <span class="hljs-attr">username</span>: <span class="hljs-title function_">getUserInfo</span>().<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-attr">meetingRoomName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomName'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="71">            <span class="hljs-attr">meetingRoomPosition</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomPosition'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="72">            <span class="hljs-attr">rangeStartDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="73">            <span class="hljs-attr">rangeStartTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartTime'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="74">            <span class="hljs-attr">rangeEndDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="75">            <span class="hljs-attr">rangeEndTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndTime'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="76">        });</span>
<span class="code-block-extension-codeLine" data-line-num="77">    }, [pageNo, pageSize]);</span>
<span class="code-block-extension-codeLine" data-line-num="78"></span>
<span class="code-block-extension-codeLine" data-line-num="79">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="80">        {</span>
<span class="code-block-extension-codeLine" data-line-num="81">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="82">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="83">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="84">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">name</span></span>
<span class="code-block-extension-codeLine" data-line-num="85">            }</span>
<span class="code-block-extension-codeLine" data-line-num="86">        },</span>
<span class="code-block-extension-codeLine" data-line-num="87">        {</span>
<span class="code-block-extension-codeLine" data-line-num="88">            <span class="hljs-attr">title</span>: <span class="hljs-string">'开始时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="89">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'startTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="90">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="91">                <span class="hljs-keyword">return</span>  <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">startTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="92">            }</span>
<span class="code-block-extension-codeLine" data-line-num="93">        },</span>
<span class="code-block-extension-codeLine" data-line-num="94">        {</span>
<span class="code-block-extension-codeLine" data-line-num="95">            <span class="hljs-attr">title</span>: <span class="hljs-string">'结束时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="96">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'endTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="97">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="98">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">endTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="99">            }</span>
<span class="code-block-extension-codeLine" data-line-num="100">        },</span>
<span class="code-block-extension-codeLine" data-line-num="101">        {</span>
<span class="code-block-extension-codeLine" data-line-num="102">            <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="103">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="104">            <span class="hljs-attr">onFilter</span>: <span class="hljs-function">(<span class="hljs-params">value, record</span>) =&gt;</span> record.<span class="hljs-property">status</span>.<span class="hljs-title function_">startsWith</span>(value <span class="hljs-keyword">as</span> string),</span>
<span class="code-block-extension-codeLine" data-line-num="105">            <span class="hljs-attr">filters</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="106">                {</span>
<span class="code-block-extension-codeLine" data-line-num="107">                  <span class="hljs-attr">text</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="108">                  <span class="hljs-attr">value</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="109">                },</span>
<span class="code-block-extension-codeLine" data-line-num="110">                {</span>
<span class="code-block-extension-codeLine" data-line-num="111">                  <span class="hljs-attr">text</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="112">                  <span class="hljs-attr">value</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="113">                },</span>
<span class="code-block-extension-codeLine" data-line-num="114">                {</span>
<span class="code-block-extension-codeLine" data-line-num="115">                    <span class="hljs-attr">text</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="116">                    <span class="hljs-attr">value</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="117">                },</span>
<span class="code-block-extension-codeLine" data-line-num="118">                {</span>
<span class="code-block-extension-codeLine" data-line-num="119">                    <span class="hljs-attr">text</span>: <span class="hljs-string">'已解除'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="120">                    <span class="hljs-attr">value</span>: <span class="hljs-string">'已解除'</span></span>
<span class="code-block-extension-codeLine" data-line-num="121">                },</span>
<span class="code-block-extension-codeLine" data-line-num="122">              ],</span>
<span class="code-block-extension-codeLine" data-line-num="123">        },</span>
<span class="code-block-extension-codeLine" data-line-num="124">        {</span>
<span class="code-block-extension-codeLine" data-line-num="125">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="126">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="127">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="128">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">createTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD hh:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="129">            }</span>
<span class="code-block-extension-codeLine" data-line-num="130">        },</span>
<span class="code-block-extension-codeLine" data-line-num="131">        {</span>
<span class="code-block-extension-codeLine" data-line-num="132">            <span class="hljs-attr">title</span>: <span class="hljs-string">'备注'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="133">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'note'</span></span>
<span class="code-block-extension-codeLine" data-line-num="134">        },</span>
<span class="code-block-extension-codeLine" data-line-num="135">        {</span>
<span class="code-block-extension-codeLine" data-line-num="136">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="137">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="138">        },</span>
<span class="code-block-extension-codeLine" data-line-num="139">        {</span>
<span class="code-block-extension-codeLine" data-line-num="140">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="141">            <span class="hljs-attr">render</span>: <span class="hljs-function">() =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="142">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="143">                    </span>
<span class="code-block-extension-codeLine" data-line-num="144">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="145">            )</span>
<span class="code-block-extension-codeLine" data-line-num="146">        }</span>
<span class="code-block-extension-codeLine" data-line-num="147">    ];</span>
<span class="code-block-extension-codeLine" data-line-num="148"></span>
<span class="code-block-extension-codeLine" data-line-num="149">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingHistory-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="150">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingHistory-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="151">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="152">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="153">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchBooking}</span></span>
<span class="code-block-extension-codeLine" data-line-num="154">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="155">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="156">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="157">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="158">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="159">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="160">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="161"></span>
<span class="code-block-extension-codeLine" data-line-num="162">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="163">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="164">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="165"></span>
<span class="code-block-extension-codeLine" data-line-num="166">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="167">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="168">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="169"></span>
<span class="code-block-extension-codeLine" data-line-num="170">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="171">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="172">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="173"></span>
<span class="code-block-extension-codeLine" data-line-num="174">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="175">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="176">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="177"></span>
<span class="code-block-extension-codeLine" data-line-num="178">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomPosition"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="179">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="180">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="181"></span>
<span class="code-block-extension-codeLine" data-line-num="182">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="183">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="184">                        搜索预定历史</span>
<span class="code-block-extension-codeLine" data-line-num="185">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="186">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="187">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="188">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="189">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingHistory-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="190">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{bookingSearchResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="191">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="192">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="193">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="194">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="195">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="196">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="197">}</span>
</code></pre>
<p>这样，列表就完成了：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/146dc4bf86ba458d845ae22118eb8b60~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2766&amp;h=964&amp;s=192334&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后实现解除预定功能：</p>
<p>在 interface.ts 添加 unbind 接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unbind</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/unbind/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>然后在页面调用下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8af9043095494b9382971e73d3b01ff2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=950&amp;h=578&amp;s=82790&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3e54efc16424180b22c7231d4ecf4e5~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=812&amp;h=428&amp;s=66227&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Popconfirm</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> <span class="hljs-string">'./booking_history.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { bookingList, unbind } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interface/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../meeting_room_list/MeetingRoomList"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">'dayjs'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">SearchBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">meetingRoomName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">meetingRoomPosition</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="29">}</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-keyword">const</span> userInfoStr = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user_info'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="33"></span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">if</span>(userInfoStr) {</span>
<span class="code-block-extension-codeLine" data-line-num="35">        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(userInfoStr);</span>
<span class="code-block-extension-codeLine" data-line-num="36">    }</span>
<span class="code-block-extension-codeLine" data-line-num="37">}</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingHistory</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="40">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="41">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="42">    <span class="hljs-keyword">const</span> [bookingSearchResult, setBookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="43">    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="44"></span>
<span class="code-block-extension-codeLine" data-line-num="45">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="46">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">bookingList</span>(values, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="47"></span>
<span class="code-block-extension-codeLine" data-line-num="48">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="49">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="50">            <span class="hljs-title function_">setBookingSearchResult</span>(data.<span class="hljs-property">bookings</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: BookingSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="51">                <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="52">                    <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="53">                    ...item</span>
<span class="code-block-extension-codeLine" data-line-num="54">                }</span>
<span class="code-block-extension-codeLine" data-line-num="55">            }))</span>
<span class="code-block-extension-codeLine" data-line-num="56">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="57">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="58">        }</span>
<span class="code-block-extension-codeLine" data-line-num="59">    }</span>
<span class="code-block-extension-codeLine" data-line-num="60"></span>
<span class="code-block-extension-codeLine" data-line-num="61">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="62"></span>
<span class="code-block-extension-codeLine" data-line-num="63">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="64">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="65">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="66">    }</span>
<span class="code-block-extension-codeLine" data-line-num="67"></span>
<span class="code-block-extension-codeLine" data-line-num="68">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="69">        <span class="hljs-title function_">searchBooking</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-attr">username</span>: <span class="hljs-title function_">getUserInfo</span>().<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="71">            <span class="hljs-attr">meetingRoomName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomName'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="72">            <span class="hljs-attr">meetingRoomPosition</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomPosition'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="73">            <span class="hljs-attr">rangeStartDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="74">            <span class="hljs-attr">rangeStartTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartTime'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="75">            <span class="hljs-attr">rangeEndDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="76">            <span class="hljs-attr">rangeEndTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndTime'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="77">        });</span>
<span class="code-block-extension-codeLine" data-line-num="78">    }, [pageNo, pageSize, num]);</span>
<span class="code-block-extension-codeLine" data-line-num="79"></span>
<span class="code-block-extension-codeLine" data-line-num="80">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeStatus</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="81"></span>
<span class="code-block-extension-codeLine" data-line-num="82">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">unbind</span>(id);</span>
<span class="code-block-extension-codeLine" data-line-num="83"></span>
<span class="code-block-extension-codeLine" data-line-num="84">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="85">            message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'状态更新成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="86">            <span class="hljs-title function_">setNum</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());</span>
<span class="code-block-extension-codeLine" data-line-num="87">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="88">            message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="89">        }</span>
<span class="code-block-extension-codeLine" data-line-num="90">    }</span>
<span class="code-block-extension-codeLine" data-line-num="91"></span>
<span class="code-block-extension-codeLine" data-line-num="92">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="93">        {</span>
<span class="code-block-extension-codeLine" data-line-num="94">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="95">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="96">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="97">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">name</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">            }</span>
<span class="code-block-extension-codeLine" data-line-num="99">        },</span>
<span class="code-block-extension-codeLine" data-line-num="100">        {</span>
<span class="code-block-extension-codeLine" data-line-num="101">            <span class="hljs-attr">title</span>: <span class="hljs-string">'开始时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="102">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'startTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="103">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="104">                <span class="hljs-keyword">return</span>  <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">startTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="105">            }</span>
<span class="code-block-extension-codeLine" data-line-num="106">        },</span>
<span class="code-block-extension-codeLine" data-line-num="107">        {</span>
<span class="code-block-extension-codeLine" data-line-num="108">            <span class="hljs-attr">title</span>: <span class="hljs-string">'结束时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="109">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'endTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="110">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="111">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">endTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="112">            }</span>
<span class="code-block-extension-codeLine" data-line-num="113">        },</span>
<span class="code-block-extension-codeLine" data-line-num="114">        {</span>
<span class="code-block-extension-codeLine" data-line-num="115">            <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="116">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="117">            <span class="hljs-attr">onFilter</span>: <span class="hljs-function">(<span class="hljs-params">value, record</span>) =&gt;</span> record.<span class="hljs-property">status</span>.<span class="hljs-title function_">startsWith</span>(value <span class="hljs-keyword">as</span> string),</span>
<span class="code-block-extension-codeLine" data-line-num="118">            <span class="hljs-attr">filters</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="119">                {</span>
<span class="code-block-extension-codeLine" data-line-num="120">                  <span class="hljs-attr">text</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="121">                  <span class="hljs-attr">value</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="122">                },</span>
<span class="code-block-extension-codeLine" data-line-num="123">                {</span>
<span class="code-block-extension-codeLine" data-line-num="124">                  <span class="hljs-attr">text</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="125">                  <span class="hljs-attr">value</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="126">                },</span>
<span class="code-block-extension-codeLine" data-line-num="127">                {</span>
<span class="code-block-extension-codeLine" data-line-num="128">                    <span class="hljs-attr">text</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="129">                    <span class="hljs-attr">value</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="130">                },</span>
<span class="code-block-extension-codeLine" data-line-num="131">                {</span>
<span class="code-block-extension-codeLine" data-line-num="132">                    <span class="hljs-attr">text</span>: <span class="hljs-string">'已解除'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="133">                    <span class="hljs-attr">value</span>: <span class="hljs-string">'已解除'</span></span>
<span class="code-block-extension-codeLine" data-line-num="134">                },</span>
<span class="code-block-extension-codeLine" data-line-num="135">              ],</span>
<span class="code-block-extension-codeLine" data-line-num="136">        },</span>
<span class="code-block-extension-codeLine" data-line-num="137">        {</span>
<span class="code-block-extension-codeLine" data-line-num="138">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="139">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="140">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="141">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">createTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD hh:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="142">            }</span>
<span class="code-block-extension-codeLine" data-line-num="143">        },</span>
<span class="code-block-extension-codeLine" data-line-num="144">        {</span>
<span class="code-block-extension-codeLine" data-line-num="145">            <span class="hljs-attr">title</span>: <span class="hljs-string">'备注'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="146">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'note'</span></span>
<span class="code-block-extension-codeLine" data-line-num="147">        },</span>
<span class="code-block-extension-codeLine" data-line-num="148">        {</span>
<span class="code-block-extension-codeLine" data-line-num="149">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="150">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="151">        },</span>
<span class="code-block-extension-codeLine" data-line-num="152">        {</span>
<span class="code-block-extension-codeLine" data-line-num="153">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="154">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="155">                record.<span class="hljs-property">status</span> === <span class="hljs-string">'申请中'</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="156">                    <span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="157">                        <span class="hljs-attr">title</span>=<span class="hljs-string">"解除申请"</span></span>
<span class="code-block-extension-codeLine" data-line-num="158">                        <span class="hljs-attr">description</span>=<span class="hljs-string">"确认解除吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="159">                        <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; changeStatus(record.id)}</span>
<span class="code-block-extension-codeLine" data-line-num="160">                        okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="161">                        cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="162">                    &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="163">                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>解除预定<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="164">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="165">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> : <span class="hljs-literal">null</span></span>
<span class="code-block-extension-codeLine" data-line-num="166">            )</span>
<span class="code-block-extension-codeLine" data-line-num="167">        }</span>
<span class="code-block-extension-codeLine" data-line-num="168">    ];</span>
<span class="code-block-extension-codeLine" data-line-num="169"></span>
<span class="code-block-extension-codeLine" data-line-num="170">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingHistory-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="171">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingHistory-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="172">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="173">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="174">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchBooking}</span></span>
<span class="code-block-extension-codeLine" data-line-num="175">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="176">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="177">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="178">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="179">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="180">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="181">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="182"></span>
<span class="code-block-extension-codeLine" data-line-num="183">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="184">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="185">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="186"></span>
<span class="code-block-extension-codeLine" data-line-num="187">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="188">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="189">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="190"></span>
<span class="code-block-extension-codeLine" data-line-num="191">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="192">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="193">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="194"></span>
<span class="code-block-extension-codeLine" data-line-num="195">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="196">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="197">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="198"></span>
<span class="code-block-extension-codeLine" data-line-num="199">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomPosition"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="200">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="201">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="202"></span>
<span class="code-block-extension-codeLine" data-line-num="203">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="204">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="205">                        搜索预定历史</span>
<span class="code-block-extension-codeLine" data-line-num="206">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="207">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="208">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="209">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="210">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingHistory-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="211">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{bookingSearchResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="212">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="213">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="214">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="215">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="216">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="217">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="218">}</span>
</code></pre>
<p>测试下：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/581c84cabc1d48929aed4f248c2b6d2f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2358&amp;h=1074&amp;s=420561&amp;e=gif&amp;f=61&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>没啥问题。</p>
<p>如果没有合适的数据，就手动去数据库里改一下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8803f967b9c4f6e89ea40b202320bc4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1834&amp;h=600&amp;s=453785&amp;e=png&amp;b=f5f5f5" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>接下来，还有一个添加预定的功能：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ab95474f0be488cbde34e4a7975f5e1~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1368&amp;h=968&amp;s=74070&amp;e=png&amp;b=d7d7d7" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>当点击会议室列表的预定按钮的时候，会弹出这个窗口。</p>
<p>添加 src/meeting_room_list/CreateBookingModal.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">InputNumber</span>, <span class="hljs-title class_">Modal</span>, <span class="hljs-title class_">Select</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { bookingAdd } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interface/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./MeetingRoomList"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">interface <span class="hljs-title class_">CreateBookingModalProps</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">isOpen</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">handleClose</span>: <span class="hljs-title class_">Function</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">meetingRoom</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12"><span class="hljs-keyword">const</span> layout = {</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">labelCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">6</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">wrapperCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">18</span> }</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CreateBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">meetingRoomId</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateBookingModal</span>(<span class="hljs-params">props: CreateBookingModalProps</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="27"></span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-keyword">const</span> [form] = useForm&lt;<span class="hljs-title class_">CreateBooking</span>&gt;();</span>
<span class="code-block-extension-codeLine" data-line-num="29"></span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-keyword">const</span> handleOk = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="31">      </span>
<span class="code-block-extension-codeLine" data-line-num="32">    }</span>
<span class="code-block-extension-codeLine" data-line-num="33"></span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"创建会议室"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">{props.isOpen}</span> <span class="hljs-attr">onOk</span>=<span class="hljs-string">{handleOk}</span> <span class="hljs-attr">onCancel</span>=<span class="hljs-string">{()</span> =&gt;</span> props.handleClose()} okText={'创建'}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">        <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="36">            <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="37">            <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="38">            {<span class="hljs-attr">...layout</span>}</span>
<span class="code-block-extension-codeLine" data-line-num="39">        &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="40">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span></span>
<span class="code-block-extension-codeLine" data-line-num="42">                <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomId"</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="44">                {props.meetingRoom.name}</span>
<span class="code-block-extension-codeLine" data-line-num="45">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="46">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="47">                <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span></span>
<span class="code-block-extension-codeLine" data-line-num="48">                <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入预定开始日期!' },</span>
<span class="code-block-extension-codeLine" data-line-num="51">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="52">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="53">                <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="54">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="56">                <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span></span>
<span class="code-block-extension-codeLine" data-line-num="57">                <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span></span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="59">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入预定开始日期!' },</span>
<span class="code-block-extension-codeLine" data-line-num="60">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="61">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="62">                <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="64">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="65">                <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span></span>
<span class="code-block-extension-codeLine" data-line-num="66">                <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span></span>
<span class="code-block-extension-codeLine" data-line-num="67">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="68">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入预定结束日期!' },</span>
<span class="code-block-extension-codeLine" data-line-num="69">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="70">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="71">                <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="72">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="73">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="74">                <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span></span>
<span class="code-block-extension-codeLine" data-line-num="75">                <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span></span>
<span class="code-block-extension-codeLine" data-line-num="76">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="77">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入预定结束日期!' },</span>
<span class="code-block-extension-codeLine" data-line-num="78">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="79">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="80">                <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="81">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="82">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="83">                <span class="hljs-attr">label</span>=<span class="hljs-string">"备注"</span></span>
<span class="code-block-extension-codeLine" data-line-num="84">                <span class="hljs-attr">name</span>=<span class="hljs-string">"note"</span></span>
<span class="code-block-extension-codeLine" data-line-num="85">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="86">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="87">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="88">        <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="89">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="90">}</span>
</code></pre>
<p>然后点击预定按钮的时候，显示这个弹窗：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4b996e8ab9a48209d994b28b7637b9f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2210&amp;h=894&amp;s=157484&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>添加 isCreateModalOpen 的 state 来标识弹窗是否打开，并且记录点击的是哪个会议室：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fdaa471d1374fb9b90428f14fc86f03~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1464&amp;h=276&amp;s=111904&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [isCreateModalOpen, setIsCreateModalOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">const</span> [currentMeetingRoom, setCurrentMeetingRoom] =  useState&lt;<span class="hljs-title class_">MeetingRoomSearchResult</span>&gt;();</span>
</code></pre>
<p>点击预定按钮的时候，打开弹窗，记录当前会议室：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b46e523254347939475a12646a22f41~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=730&amp;h=414&amp;s=50866&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="6">                setIsCreateModalOpen(true);</span>
<span class="code-block-extension-codeLine" data-line-num="7">                setCurrentMeetingRoom(record);</span>
<span class="code-block-extension-codeLine" data-line-num="8">            }}&gt;预定<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">    )</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>
<p>然后弹窗传入当前的会议室，并且点击关闭的时候关闭弹窗：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc351559c9f646ae83d4828e49c7138d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1606&amp;h=294&amp;s=62449&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    currentMeetingRoom ? </span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CreateBookingModal</span> <span class="hljs-attr">meetingRoom</span>=<span class="hljs-string">{currentMeetingRoom}</span> <span class="hljs-attr">isOpen</span>=<span class="hljs-string">{isCreateModalOpen}</span> <span class="hljs-attr">handleClose</span>=<span class="hljs-string">{()</span> =&gt;</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">            setIsCreateModalOpen(false);</span>
<span class="code-block-extension-codeLine" data-line-num="5">        }}&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">CreateBookingModal</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">    : <span class="hljs-literal">null</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>没啥问题：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/787ac7eaea2d44a4884ad4aa09022f1b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2058&amp;h=1128&amp;s=2202931&amp;e=gif&amp;f=69&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后在 interface.ts 添加用到的接口：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bbc7c06400174b0a80ff8f076d4da6ac~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=806&amp;h=890&amp;s=96887&amp;e=png&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bookingAdd</span>(<span class="hljs-params">booking: CreateBooking</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> rangeStartDateStr = <span class="hljs-title function_">dayjs</span>(booking.<span class="hljs-property">rangeStartDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-keyword">const</span> rangeStartTimeStr = <span class="hljs-title function_">dayjs</span>(booking.<span class="hljs-property">rangeStartTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> startTime = <span class="hljs-title function_">dayjs</span>(rangeStartDateStr + <span class="hljs-string">' '</span> + rangeStartTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">const</span> rangeEndDateStr = <span class="hljs-title function_">dayjs</span>(booking.<span class="hljs-property">rangeEndDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">const</span> rangeEndTimeStr = <span class="hljs-title function_">dayjs</span>(booking.<span class="hljs-property">rangeEndTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-keyword">const</span> endTime = <span class="hljs-title function_">dayjs</span>(rangeEndDateStr + <span class="hljs-string">' '</span> + rangeEndTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/booking/add'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-attr">meetingRoomId</span>: booking.<span class="hljs-property">meetingRoomId</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="12">        startTime,</span>
<span class="code-block-extension-codeLine" data-line-num="13">        endTime,</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-attr">note</span>: booking.<span class="hljs-property">note</span>            </span>
<span class="code-block-extension-codeLine" data-line-num="15">    });</span>
<span class="code-block-extension-codeLine" data-line-num="16">}</span>
</code></pre>
<p>这里需要把日期时间做合并。</p>
<p>然后在组件里调用下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> handleOk = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> values = form.<span class="hljs-title function_">getFieldsValue</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="3">    values.<span class="hljs-property">meetingRoomId</span> = props.<span class="hljs-property">meetingRoom</span>.<span class="hljs-property">id</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">bookingAdd</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="8">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'预定成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9">        form.<span class="hljs-title function_">resetFields</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="10">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="11">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="12">        message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="13">    }</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
</code></pre>
<p>没啥问题：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b24c0df2a973408cbacdc3ac389be261~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1866&amp;h=1204&amp;s=423594&amp;e=gif&amp;f=33&amp;b=808080" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14a7e98af7a04241a198881d232da89e~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2602&amp;h=810&amp;s=314162&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6106641ee4e443eca6d7e76a89f65fd5~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1866&amp;h=1204&amp;s=423594&amp;e=gif&amp;f=33&amp;b=808080" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，预定、预订历史、取消预订就都完成了。</p>
<p>案例代码上传了<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_frontend_user" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_frontend_user" ref="nofollow noopener noreferrer">小册仓库</a></p>
<h2 data-id="heading-0">总结</h2>
<p>这节我们完成了预订历史、添加预定、取消预订的功能。</p>
<p>就是涉及到时间日期需要两个表单做合并处理，其余的倒是没啥难度。</p>
<p>至此，预订管理模块就完成了。</p></div>