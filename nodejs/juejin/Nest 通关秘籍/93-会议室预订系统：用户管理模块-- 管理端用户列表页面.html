<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>前面我们写了用户端的一些页面，这节继续来写管理端的。</p>
<p>涉及到这些页面：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f4f48617f204906a5cf3379936518fe~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1600&amp;h=1050&amp;s=57943&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da8c422c3e2848ef86b1f77027b79ee8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1278&amp;h=890&amp;s=91964&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce7922e5d4e24a2ea5457075866b19e4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1224&amp;h=852&amp;s=54200&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f037c80960cf4a20b04283fc4c454578~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1474&amp;h=1006&amp;s=64942&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这节我们来写前两个。</p>
<p>先新建个 react 项目：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">ini</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-ini code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npx create-react-app <span class="hljs-attr">--template</span>=typescript meeting_room_booking_system_frontend_admin</span>
</code></pre>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf5645fda44641acb503ec5ade74b1dc~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1118&amp;h=202&amp;s=59282&amp;e=png&amp;b=000000" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>进入项目目录，把开发服务跑起来：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">arduino</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-arduino code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm run start</span>
</code></pre>
<p>浏览器访问 <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" rel="nofollow noopener noreferrer" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> 可以看到这个界面：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e578f28f353c488c8426699af3896f48~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>就说明 react 项目成功跑起来了。</p>
<p>然后我们添加 router：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install <span class="hljs-attr">--save</span> react-router-dom</span>
</code></pre>
<p>在 index.tsx 加上路由的配置：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouterProvider</span>, createBrowserRouter, <span class="hljs-title class_">Link</span>, <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>index<span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ErrorPage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="9">  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error Page<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="13">  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>user manage<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="17">  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20"><span class="hljs-keyword">const</span> routes = [</span>
<span class="code-block-extension-codeLine" data-line-num="21">  {</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Index</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Index</span>&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">errorElement</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorPage</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">children</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="26">      {</span>
<span class="code-block-extension-codeLine" data-line-num="27">        <span class="hljs-attr">path</span>: <span class="hljs-string">'user_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="28">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="29">      }</span>
<span class="code-block-extension-codeLine" data-line-num="30">    ]</span>
<span class="code-block-extension-codeLine" data-line-num="31">  },</span>
<span class="code-block-extension-codeLine" data-line-num="32">  {</span>
<span class="code-block-extension-codeLine" data-line-num="33">    <span class="hljs-attr">path</span>: <span class="hljs-string">"login"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="35">  }</span>
<span class="code-block-extension-codeLine" data-line-num="36">];</span>
<span class="code-block-extension-codeLine" data-line-num="37"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>(routes);</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39"><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(</span>
<span class="code-block-extension-codeLine" data-line-num="40">  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">);</span>
<span class="code-block-extension-codeLine" data-line-num="42"></span>
<span class="code-block-extension-codeLine" data-line-num="43">root.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}/</span>&gt;</span></span>);</span>
</code></pre>
<p>配置了 4 个路由：</p>
<p>访问 /login 的时候，渲染 Login 组件。</p>
<p>访问 / 的时候，渲染 Index 组件。</p>
<p>访问 /user_manage 的时候，渲染 / 和 user_manage 的二级路由，也就是 Index + UserManage 组件。</p>
<p>以及出错的时候，渲染 ErrorPage 组件。</p>
<p>测试下：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d7b5b0240f94d73aa0cba2cbcc1c830~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=894&amp;h=462&amp;s=441246&amp;e=gif&amp;f=61&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>都没问题。</p>
<p>把 src 目录下其余文件去掉：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20e73f7432c44e23bde08e1de692533f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后创建 4 个组件：</p>
<p>src/pages/Login/Login.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>login<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>   </span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>src/pages/Index/Index.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Index<span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>   </span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
</code></pre>
<p>src/pages/UserManage/UserManage.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>UserManage<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>src/pages/ErrorPage/ErrorPage.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ErrorPage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error Page<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>改下 index.tsx 配置对应的路由：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/338b09b3452a47a08b2a6c794d967344~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1278&amp;h=1132&amp;s=205581&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouterProvider</span>, createBrowserRouter, <span class="hljs-title class_">Link</span>, <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Index</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Index/Index'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ErrorPage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/ErrorPage/ErrorPage'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserManage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/UserManage/UserManage'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Login</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Login/Login'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9"><span class="hljs-keyword">const</span> routes = [</span>
<span class="code-block-extension-codeLine" data-line-num="10">  {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Index</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Index</span>&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">errorElement</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorPage</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">children</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="15">      {</span>
<span class="code-block-extension-codeLine" data-line-num="16">        <span class="hljs-attr">path</span>: <span class="hljs-string">'user_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="17">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="18">      }</span>
<span class="code-block-extension-codeLine" data-line-num="19">    ]</span>
<span class="code-block-extension-codeLine" data-line-num="20">  },</span>
<span class="code-block-extension-codeLine" data-line-num="21">  {</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">path</span>: <span class="hljs-string">"login"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="24">  }</span>
<span class="code-block-extension-codeLine" data-line-num="25">];</span>
<span class="code-block-extension-codeLine" data-line-num="26"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>(routes);</span>
<span class="code-block-extension-codeLine" data-line-num="27"></span>
<span class="code-block-extension-codeLine" data-line-num="28"><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(</span>
<span class="code-block-extension-codeLine" data-line-num="29">  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span></span>
<span class="code-block-extension-codeLine" data-line-num="30">);</span>
<span class="code-block-extension-codeLine" data-line-num="31"></span>
<span class="code-block-extension-codeLine" data-line-num="32">root.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}/</span>&gt;</span></span>);</span>
</code></pre>
<p>测试下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46eb44289c8b469eb87729ac9f0a9d9d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=534&amp;h=164&amp;s=14881&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/871a1b02f26145dc85037751119a15c9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=724&amp;h=208&amp;s=24314&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9691fb4812e4df99162de835d4d3230~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=622&amp;h=200&amp;s=17219&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e838778ff8849f19bf2dcc90cf4620f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=582&amp;h=190&amp;s=18502&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image">
都没啥问题。</p>
<p>然后来写 Login 页面：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f4f48617f204906a5cf3379936518fe~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1600&amp;h=1050&amp;s=57943&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>引入 Ant Design 组件库：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install antd <span class="hljs-attr">--save</span></span>
</code></pre>
<p>在 Login 组件引入 DatePicker 组件：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DatePicker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>   </span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
</code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9c984c744ec49a1a24e5b9c8bab3b94~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>没啥问题，说明 antd 引入成功了。</p>
<p>然后我们把登录页面写一下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Checkbox</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> <span class="hljs-string">'./login.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">interface <span class="hljs-title class_">LoginUser</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">password</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-keyword">const</span> layout1 = {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">labelCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">4</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">wrapperCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">20</span> }</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
<span class="code-block-extension-codeLine" data-line-num="14"></span>
<span class="code-block-extension-codeLine" data-line-num="15"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-keyword">const</span> onFinish = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">values: LoginUser</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="18">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="19">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"login-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="22">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>会议室预订系统<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">        <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="24">            {<span class="hljs-attr">...layout1</span>}</span>
<span class="code-block-extension-codeLine" data-line-num="25">            <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{onFinish}</span></span>
<span class="code-block-extension-codeLine" data-line-num="26">            <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">            <span class="hljs-attr">autoComplete</span>=<span class="hljs-string">"off"</span></span>
<span class="code-block-extension-codeLine" data-line-num="28">        &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="29">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="30">                <span class="hljs-attr">label</span>=<span class="hljs-string">"用户名"</span></span>
<span class="code-block-extension-codeLine" data-line-num="31">                <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span></span>
<span class="code-block-extension-codeLine" data-line-num="32">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[{</span> <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入用户名!' }]}</span>
<span class="code-block-extension-codeLine" data-line-num="33">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="34">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="36"></span>
<span class="code-block-extension-codeLine" data-line-num="37">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="38">                <span class="hljs-attr">label</span>=<span class="hljs-string">"密码"</span></span>
<span class="code-block-extension-codeLine" data-line-num="39">                <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span></span>
<span class="code-block-extension-codeLine" data-line-num="40">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[{</span> <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入密码!' }]}</span>
<span class="code-block-extension-codeLine" data-line-num="41">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="42">                <span class="hljs-tag">&lt;<span class="hljs-name">Input.Password</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="44"></span>
<span class="code-block-extension-codeLine" data-line-num="45">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="46">                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'btn'</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="47">                    登录</span>
<span class="code-block-extension-codeLine" data-line-num="48">                <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">        <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   </span>
<span class="code-block-extension-codeLine" data-line-num="52">}</span>
</code></pre>
<p>这里和用户端差不多.</p>
<p>login.css 如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#login-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span> auto <span class="hljs-number">0</span> auto;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attribute">text-align</span>: center;</span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-selector-id">#login-container</span> <span class="hljs-selector-class">.links</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attribute">display</span>: flex;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attribute">justify-content</span>: space-between;</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-selector-id">#login-container</span> <span class="hljs-selector-class">.btn</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>
<p>访问 /login，可以看到现在的登录页面：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aafe778501fb48d0ba4d4a581cbd1a2d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1402&amp;h=860&amp;s=68708&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后看一下接口文档 <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3005%2Fapi-doc" target="_blank" rel="nofollow noopener noreferrer" title="http://localhost:3005/api-doc" ref="nofollow noopener noreferrer">http://localhost:3005/api-doc</a></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6c732fe2b634bb28d2697b5be2bf715~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=682&amp;h=670&amp;s=55233&amp;e=png&amp;b=f1f8f4" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d47c5ffcf1474b8f8a8b3103bac84011~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=802&amp;h=1230&amp;s=148643&amp;e=png&amp;b=ecf6f0" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>传入用户名、密码、返回用户信息和 token。</p>
<p>在 postman 里测试下登录接口：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/daaefa943b8040f79b6e479439013388~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=966&amp;h=1216&amp;s=141059&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后在点击登录按钮之后，用 axios 调用它：</p>
<p>安装 axios：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang"></span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install axios</span>
</code></pre>
<p>在前端项目创建个 src/interfaces/interfaces.ts</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> axiosInstance = axios.<span class="hljs-title function_">create</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3005/'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">});</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">username: string, password: string</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/admin/login'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        username, password</span>
<span class="code-block-extension-codeLine" data-line-num="11">    });</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>
<p>在这里集中管理接口。</p>
<p>然后 onFinish 里调用：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> onFinish = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">LoginUser</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">login</span>(values.<span class="hljs-property">username</span>, values.<span class="hljs-property">password</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">const</span> { code, <span class="hljs-attr">message</span>: msg, data} = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="8">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'登录成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'access_token'</span>, data.<span class="hljs-property">accessToken</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'refresh_token'</span>, data.<span class="hljs-property">refreshToken</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="12">        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user_info'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data.<span class="hljs-property">userInfo</span>));</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="15">            <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="16">        }, <span class="hljs-number">1000</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="17">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="18">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="19">    }</span>
<span class="code-block-extension-codeLine" data-line-num="20">}, []);</span>
</code></pre>
<p>这里和用户端一摸一样。</p>
<p>登录下：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804cf14e55ba417cb8bb5e19c46f8965~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2136&amp;h=1022&amp;s=222720&amp;e=gif&amp;f=22&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>提示 400 错误没处理。</p>
<p>因为接口返回 400 的时候，axios 会抛异常：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/058a8b97c445448fa244edad97db13b9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=740&amp;h=208&amp;s=43281&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97c548038fe146d3b3380e4f64f33bae~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=678&amp;h=178&amp;s=31645&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们加一个响应的 interceptor，返回 error.response 而不是 Promise.reject(error.response)</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">axiosInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-keyword">return</span> response;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    },</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-keyword">async</span> (error) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-keyword">return</span> error.<span class="hljs-property">response</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    }</span>
<span class="code-block-extension-codeLine" data-line-num="8">);</span>
</code></pre>
<p>再测试下：</p>
<p>当用户不存在时：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb4b71e3cbe84c449f2a1f1f2a0734b0~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=962&amp;h=628&amp;s=49391&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>当密码错误时：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5207dce8428a4e5b8ecd3562aee99786~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1038&amp;h=634&amp;s=52906&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>登录成功时：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58eef93c68ca4cc0b79b7a42e4ed3b4d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1498&amp;h=838&amp;s=112885&amp;e=gif&amp;f=22&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d1f95e2a5bd4c5f805e726b448f2e64~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1600&amp;h=442&amp;s=131911&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>都没啥问题。</p>
<p>这样，管理员登录的前后端功能就都完成了。</p>
<p>然后是用户管理的页面：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c2d3c95f2d640fc9e7a785d5c5c5ef6~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1278&amp;h=890&amp;s=96530&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>修改下 Index.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserOutlined</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ant-design/icons"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"index-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>会议室预定系统-后台管理<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">            <span class="hljs-tag">&lt;<span class="hljs-name">UserOutlined</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"icon"</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"body"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
</code></pre>
<p>这里用到了 antd 的 icon 组件，需要安装用到的包：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">sql</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-sql code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install <span class="hljs-variable">@ant</span><span class="hljs-operator">-</span>design<span class="hljs-operator">/</span>icons <span class="hljs-comment">--save</span></span>
</code></pre>
<p>css 如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#index-container</span>{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attribute">display</span>: flex;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attribute">flex-direction</span>: column;</span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-selector-id">#index-container</span> <span class="hljs-selector-class">.header</span>{</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#aaa</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">80px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attribute">display</span>: flex;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attribute">justify-content</span>: space-between;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
<span class="code-block-extension-codeLine" data-line-num="14"><span class="hljs-selector-id">#index-container</span> <span class="hljs-selector-tag">h1</span>{</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16">}</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18"><span class="hljs-selector-id">#index-container</span> <span class="hljs-selector-class">.icon</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">40px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="21">}</span>
<span class="code-block-extension-codeLine" data-line-num="22"><span class="hljs-selector-id">#index-container</span> <span class="hljs-selector-class">.body</span>{</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
</code></pre>
<p>测试下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/014c671b804445e7aca8981ad5e5a2f8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1402&amp;h=448&amp;s=63498&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>没啥问题。</p>
<p>不知道同学们有没有发现，其实这个页面应该是三级路由：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e4b045cfbcd461d86ea38484c217930~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1038&amp;h=682&amp;s=101354&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>因为左边这部分也是要多个页面共用的。</p>
<p>我们改一下路由配置：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> routes = [</span>
<span class="code-block-extension-codeLine" data-line-num="2">  {</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Index</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Index</span>&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">errorElement</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorPage</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">children</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="7">      {</span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menu</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Menu</span>&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-attr">children</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="11">          {</span>
<span class="code-block-extension-codeLine" data-line-num="12">            <span class="hljs-attr">path</span>: <span class="hljs-string">'user_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">            <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="14">          }</span>
<span class="code-block-extension-codeLine" data-line-num="15">        ]</span>
<span class="code-block-extension-codeLine" data-line-num="16">      }</span>
<span class="code-block-extension-codeLine" data-line-num="17">    ]</span>
<span class="code-block-extension-codeLine" data-line-num="18">  },</span>
<span class="code-block-extension-codeLine" data-line-num="19">  {</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">path</span>: <span class="hljs-string">"login"</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="22">  }</span>
<span class="code-block-extension-codeLine" data-line-num="23">];</span>
</code></pre>
<p>添加 src/pages/Menu/Menu.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">        menu <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>渲染出来是这样的：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa3dbde68dfa40b4be6fda4c762d861b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=874&amp;h=432&amp;s=43399&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们来写一下 Menu 组件：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Menu</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">AntdMenu</span>, <span class="hljs-title class_">MenuProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./menu.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">const</span> <span class="hljs-attr">items</span>: <span class="hljs-title class_">MenuProps</span>[<span class="hljs-string">'items'</span>] = [</span>
<span class="code-block-extension-codeLine" data-line-num="6">    {</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-attr">label</span>: <span class="hljs-string">"会议室管理"</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">    },</span>
<span class="code-block-extension-codeLine" data-line-num="10">    {</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="12">        <span class="hljs-attr">label</span>: <span class="hljs-string">"预定管理"</span></span>
<span class="code-block-extension-codeLine" data-line-num="13">    },</span>
<span class="code-block-extension-codeLine" data-line-num="14">    {</span>
<span class="code-block-extension-codeLine" data-line-num="15">        <span class="hljs-attr">key</span>: <span class="hljs-string">'3'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="16">        <span class="hljs-attr">label</span>: <span class="hljs-string">"用户管理"</span></span>
<span class="code-block-extension-codeLine" data-line-num="17">    },</span>
<span class="code-block-extension-codeLine" data-line-num="18">    {</span>
<span class="code-block-extension-codeLine" data-line-num="19">        <span class="hljs-attr">key</span>: <span class="hljs-string">'4'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="20">        <span class="hljs-attr">label</span>: <span class="hljs-string">"统计"</span></span>
<span class="code-block-extension-codeLine" data-line-num="21">    }</span>
<span class="code-block-extension-codeLine" data-line-num="22">];</span>
<span class="code-block-extension-codeLine" data-line-num="23"></span>
<span class="code-block-extension-codeLine" data-line-num="24"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"menu-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="26">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"menu-area"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">            <span class="hljs-tag">&lt;<span class="hljs-name">AntdMenu</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="28">                <span class="hljs-attr">defaultSelectedKeys</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">3</span>']}</span>
<span class="code-block-extension-codeLine" data-line-num="29">                <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span></span>
<span class="code-block-extension-codeLine" data-line-num="30">            /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="31">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="32">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content-area"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="33">            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="34">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="36">}</span>
</code></pre>
<p>menu.css 如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#menu-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">display</span>: flex;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attribute">flex-direction</span>: row;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-selector-id">#menu-container</span> <span class="hljs-selector-class">.menu-area</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>渲染出来是这样的：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/440b72a63ccc4a0fbf895d7f7d43addc~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=942&amp;h=584&amp;s=57621&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后来写 UserManage 组件：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b27b7789cfa45778f51a82786c8a969~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1034&amp;h=678&amp;s=84160&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>可以分为 2 部分，上面的搜索表单、下面的结果表格。</p>
<p>我们来写一下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Table</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./UserManage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">interface <span class="hljs-title class_">SearchUser</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">nickName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">email</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="12"></span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-keyword">const</span> searchUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchUser</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="15">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="18">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="19">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="20">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchUser}</span></span>
<span class="code-block-extension-codeLine" data-line-num="21">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="22">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="24">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="25">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"用户名"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="26">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="28"></span>
<span class="code-block-extension-codeLine" data-line-num="29">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"昵称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"nickName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="30">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="31">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="32"></span>
<span class="code-block-extension-codeLine" data-line-num="33">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"邮箱"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="34">                    { <span class="hljs-attr">type:</span> "<span class="hljs-attr">email</span>", <span class="hljs-attr">message:</span> '请输入合法邮箱地址!'}</span>
<span class="code-block-extension-codeLine" data-line-num="35">                ]}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="36">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="37">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="40">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                        搜索用户</span>
<span class="code-block-extension-codeLine" data-line-num="42">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="44">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="45">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="46">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="47">                </span>
<span class="code-block-extension-codeLine" data-line-num="48">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">}</span>
</code></pre>
<p>UserManage.css</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#userManage-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>先把 form 部分写完。</p>
<p>测试下：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c3707b563af4426ad2255623c101c1d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1968&amp;h=1004&amp;s=130495&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后再写 table 部分：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Table</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./UserManage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">interface <span class="hljs-title class_">SearchUser</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">nickName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">email</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">interface <span class="hljs-title class_">UserSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">nickName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">email</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">headPic</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">createTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"><span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">UserSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="20">    {</span>
<span class="code-block-extension-codeLine" data-line-num="21">        <span class="hljs-attr">title</span>: <span class="hljs-string">'用户名'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="22">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'username'</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">    },</span>
<span class="code-block-extension-codeLine" data-line-num="24">    {</span>
<span class="code-block-extension-codeLine" data-line-num="25">        <span class="hljs-attr">title</span>: <span class="hljs-string">'头像'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="26">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'headPic'</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">    },</span>
<span class="code-block-extension-codeLine" data-line-num="28">    {</span>
<span class="code-block-extension-codeLine" data-line-num="29">        <span class="hljs-attr">title</span>: <span class="hljs-string">'昵称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="30">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'nickName'</span></span>
<span class="code-block-extension-codeLine" data-line-num="31">    },</span>
<span class="code-block-extension-codeLine" data-line-num="32">    {</span>
<span class="code-block-extension-codeLine" data-line-num="33">        <span class="hljs-attr">title</span>: <span class="hljs-string">'邮箱'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="34">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'email'</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">    },</span>
<span class="code-block-extension-codeLine" data-line-num="36">    {</span>
<span class="code-block-extension-codeLine" data-line-num="37">        <span class="hljs-attr">title</span>: <span class="hljs-string">'注册时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="38">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="39">    }   </span>
<span class="code-block-extension-codeLine" data-line-num="40">];</span>
<span class="code-block-extension-codeLine" data-line-num="41"></span>
<span class="code-block-extension-codeLine" data-line-num="42"><span class="hljs-keyword">const</span> data = [</span>
<span class="code-block-extension-codeLine" data-line-num="43">    {</span>
<span class="code-block-extension-codeLine" data-line-num="44">        <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="45">        <span class="hljs-attr">username</span>: <span class="hljs-string">'xx'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="46">        <span class="hljs-attr">headPic</span>: <span class="hljs-string">'xxx.png'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="47">        <span class="hljs-attr">nickName</span>: <span class="hljs-string">'xxx'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="48">        <span class="hljs-attr">email</span>: <span class="hljs-string">'xx@xx.com'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="49">        <span class="hljs-attr">createTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="50">    },</span>
<span class="code-block-extension-codeLine" data-line-num="51">    {</span>
<span class="code-block-extension-codeLine" data-line-num="52">        <span class="hljs-attr">key</span>: <span class="hljs-string">'12'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="53">        <span class="hljs-attr">username</span>: <span class="hljs-string">'yy'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="54">        <span class="hljs-attr">headPic</span>: <span class="hljs-string">'yy.png'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="55">        <span class="hljs-attr">nickName</span>: <span class="hljs-string">'yyy'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="56">        <span class="hljs-attr">email</span>: <span class="hljs-string">'yy@yy.com'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="57">        <span class="hljs-attr">createTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="58">    }</span>
<span class="code-block-extension-codeLine" data-line-num="59">]</span>
<span class="code-block-extension-codeLine" data-line-num="60"></span>
<span class="code-block-extension-codeLine" data-line-num="61"></span>
<span class="code-block-extension-codeLine" data-line-num="62"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="63"></span>
<span class="code-block-extension-codeLine" data-line-num="64">    <span class="hljs-keyword">const</span> searchUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchUser</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="65">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="66">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="67"></span>
<span class="code-block-extension-codeLine" data-line-num="68">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="69">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="71">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchUser}</span></span>
<span class="code-block-extension-codeLine" data-line-num="72">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="73">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="74">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="75">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="76">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"用户名"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="77">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="78">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="79"></span>
<span class="code-block-extension-codeLine" data-line-num="80">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"昵称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"nickName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="81">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="82">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="83"></span>
<span class="code-block-extension-codeLine" data-line-num="84">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"邮箱"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="85">                    { <span class="hljs-attr">type:</span> "<span class="hljs-attr">email</span>", <span class="hljs-attr">message:</span> '请输入合法邮箱地址!'}</span>
<span class="code-block-extension-codeLine" data-line-num="86">                ]}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="87">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="88">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="89"></span>
<span class="code-block-extension-codeLine" data-line-num="90">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="91">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="92">                        搜索用户</span>
<span class="code-block-extension-codeLine" data-line-num="93">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="94">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="95">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="96">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="97">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{data}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="99">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">10</span></span>
<span class="code-block-extension-codeLine" data-line-num="100">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="101">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="102">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="103">}</span>
</code></pre>
<p>渲染出来是这样的：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5eefc673345d496795397ccd86a49a01~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2010&amp;h=854&amp;s=109808&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后我们调用下搜索接口。</p>
<p>看下接口文档：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21fffa8c553f4ce69bd55ac2352bfcba~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1210&amp;h=1362&amp;s=130120&amp;e=png&amp;b=eef4fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cd4d8a033ae4606902aa5233a38278d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=930&amp;h=1046&amp;s=113974&amp;e=png&amp;b=eef4fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>在 postman 里调用下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32716e1400494b7eb6d295cf5bc83272~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=816&amp;h=798&amp;s=69140&amp;e=png&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这个接口是需要登录的。</p>
<p>我们先登录一下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9f0c889d45040febc88194d2fe674b8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1070&amp;h=1060&amp;s=203948&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>带上 access_token 再访问：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44803be273644d6fa7f733ac7d7c7082~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=958&amp;h=540&amp;s=67937&amp;e=png&amp;b=fafafa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ffb2c9d9bf74ad887167df002b9702c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1228&amp;h=1306&amp;s=151975&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>返回了 8 条数据。</p>
<p>然后我们在页面里调用下：</p>
<p>先把之前写的 axios 的 interceptors 自动添加 authorization 的 header，自动 refresh token 的逻辑拿过来：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">axiosInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> accessToken = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'access_token'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">if</span>(accessToken) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">        config.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span> = <span class="hljs-string">'Bearer '</span> + accessToken;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    }</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">return</span> config;</span>
<span class="code-block-extension-codeLine" data-line-num="8">})</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">axiosInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="12">        <span class="hljs-keyword">return</span> response;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    },</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-keyword">async</span> (error) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="15">        <span class="hljs-keyword">let</span> { data, config } = error.<span class="hljs-property">response</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">code</span> === <span class="hljs-number">401</span> &amp;&amp; !config.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/user/admin/refresh'</span>)) {</span>
<span class="code-block-extension-codeLine" data-line-num="18">            </span>
<span class="code-block-extension-codeLine" data-line-num="19">            <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">refreshToken</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">            <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="22">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">axios</span>(config);</span>
<span class="code-block-extension-codeLine" data-line-num="23">            } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="24">                message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26">                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="27">                    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="28">                }, <span class="hljs-number">1500</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="29">            }</span>
<span class="code-block-extension-codeLine" data-line-num="30">            </span>
<span class="code-block-extension-codeLine" data-line-num="31">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="32">            <span class="hljs-keyword">return</span> error.<span class="hljs-property">response</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="33">        }</span>
<span class="code-block-extension-codeLine" data-line-num="34">    }</span>
<span class="code-block-extension-codeLine" data-line-num="35">)</span>
<span class="code-block-extension-codeLine" data-line-num="36"></span>
<span class="code-block-extension-codeLine" data-line-num="37"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">refreshToken</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="38">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/admin/refresh'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="39">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="40">          <span class="hljs-attr">refresh_token</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refresh_token'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="41">        }</span>
<span class="code-block-extension-codeLine" data-line-num="42">    });</span>
<span class="code-block-extension-codeLine" data-line-num="43">    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'access_token'</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">access_token</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="44">    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'refresh_token'</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">refresh_token</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="45">    <span class="hljs-keyword">return</span> res;</span>
<span class="code-block-extension-codeLine" data-line-num="46">}</span>
</code></pre>
<p>然后添加一个接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">userSearch</span>(<span class="hljs-params">username: string, nickName: string, email: string, pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/list'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">            username,</span>
<span class="code-block-extension-codeLine" data-line-num="5">            nickName,</span>
<span class="code-block-extension-codeLine" data-line-num="6">            email,</span>
<span class="code-block-extension-codeLine" data-line-num="7">            pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="8">            pageSize</span>
<span class="code-block-extension-codeLine" data-line-num="9">        }</span>
<span class="code-block-extension-codeLine" data-line-num="10">    });</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>
<p>在页面调用下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> [userResult, setUserResult] = useState&lt;<span class="hljs-title class_">UserSearchResult</span>[]&gt;();</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">const</span> searchUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchUser</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">userSearch</span>(values.<span class="hljs-property">username</span>,values.<span class="hljs-property">nickName</span>, values.<span class="hljs-property">email</span>, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-title function_">setUserResult</span>(data.<span class="hljs-property">users</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: UserSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">            <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="12">                <span class="hljs-attr">key</span>: item.<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">                ...item</span>
<span class="code-block-extension-codeLine" data-line-num="14">            }</span>
<span class="code-block-extension-codeLine" data-line-num="15">        }))</span>
<span class="code-block-extension-codeLine" data-line-num="16">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="17">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="18">    }</span>
<span class="code-block-extension-codeLine" data-line-num="19">}, []);</span>
</code></pre>
<p>使用 useState 创建 pageNo、pageSize、userResult 这三个状态。</p>
<p>请求接口，成功后把数据设置到 userResult。</p>
<p>然后修改下 table 的 dataSource：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/352e52da46824f8d8e092e19fb6064fc~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1338&amp;h=262&amp;s=53708&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>测试下：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11e582d769334d4db1b00a30d3f32eba~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=968&amp;h=668&amp;s=52543&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>先登录。</p>
<p>然后访问 <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2Fuser_manage" target="_blank" rel="nofollow noopener noreferrer" title="http://localhost:3000/user_manage" ref="nofollow noopener noreferrer">http://localhost:3000/user_manage</a></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53f6b7670ed74ba685a2a5c43493fee2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2174&amp;h=1458&amp;s=565540&amp;e=gif&amp;f=44&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>搜索接口对接成功。</p>
<p>然后再对接下分页：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;<span class="hljs-title class_">Table</span> columns={columns} dataSource={userResult} pagination={ {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">current</span>: pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">pageSize</span>: pageSize,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">onChange</span>: changePage</span>
<span class="code-block-extension-codeLine" data-line-num="5">}}/&gt;</span>
</code></pre>
<p>设置 pageNo 和 pageSize，并监听 onChange 事件</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title function_">searchUser</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-attr">nickName</span>: <span class="hljs-string">''</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">    });</span>
<span class="code-block-extension-codeLine" data-line-num="7">}, [pageNo, pageSize]);</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9"><span class="hljs-keyword">const</span> changePage = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="12">}, []);</span>
</code></pre>
<p>分页设置改变的时候，设置 pageNo 和 pageSize。</p>
<p>并且 useEffect 监听这两个 state，在变化的时候，重新发送请求。</p>
<p>这样，刚进入页面的时候，就会触发一次渲染，并且在分页设置改变时也会触发：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6907a31e61ba47dc8c3ef28f1ab6e7c7~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2286&amp;h=1364&amp;s=240312&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后修改下 headPic，改为图片：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">UserSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="2">    {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">title</span>: <span class="hljs-string">'用户名'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'username'</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">    },</span>
<span class="code-block-extension-codeLine" data-line-num="6">    {</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-attr">title</span>: <span class="hljs-string">'头像'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'headPic'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="10">            <span class="hljs-keyword">return</span> value ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span></span></span></span>
<span class="code-block-extension-codeLine" data-line-num="11">                    <span class="hljs-attr">width</span>=<span class="hljs-string">{50}</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">                    <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">http:</span>//<span class="hljs-attr">localhost:3005</span>/${<span class="hljs-attr">value</span>}`}</span>
<span class="code-block-extension-codeLine" data-line-num="13">            /&gt; : <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="14">        }</span>
<span class="code-block-extension-codeLine" data-line-num="15">    },</span>
<span class="code-block-extension-codeLine" data-line-num="16">    {</span>
<span class="code-block-extension-codeLine" data-line-num="17">        <span class="hljs-attr">title</span>: <span class="hljs-string">'昵称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="18">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'nickName'</span></span>
<span class="code-block-extension-codeLine" data-line-num="19">    },</span>
<span class="code-block-extension-codeLine" data-line-num="20">    {</span>
<span class="code-block-extension-codeLine" data-line-num="21">        <span class="hljs-attr">title</span>: <span class="hljs-string">'邮箱'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="22">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'email'</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">    },</span>
<span class="code-block-extension-codeLine" data-line-num="24">    {</span>
<span class="code-block-extension-codeLine" data-line-num="25">        <span class="hljs-attr">title</span>: <span class="hljs-string">'注册时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="26">        <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">    }   </span>
<span class="code-block-extension-codeLine" data-line-num="28">];</span>
</code></pre>
<p>这里用的是 antd 的 Image 组件，有预览的功能：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc7cd1e6208e4126b4f3fb6ccc8fb912~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2242&amp;h=1462&amp;s=1757690&amp;e=gif&amp;f=25&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>原型图还有个冻结功能：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9bb94645e5b249a8b86c2f42611771c1~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=998&amp;h=658&amp;s=80389&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>看下接口文档：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9e005983431492daa6a07da88c36716~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1010&amp;h=1238&amp;s=92277&amp;e=png&amp;b=eff5fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>很简单，就是个 get 接口。</p>
<p>我们在表格里加一列：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/806b06492b3346a98f7059b7fa785294~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1484&amp;h=782&amp;s=123594&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {freezeUser(record.id)}}&gt;冻结<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">    )</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>
<p>这里用到了 id，我们在类型里加一下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95d56c083fcc46d89fad7219c5f2a81a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=584&amp;h=372&amp;s=45796&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后在 interfaces.tsx 添加这个接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">freeze</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/freeze'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">            id</span>
<span class="code-block-extension-codeLine" data-line-num="5">        }</span>
<span class="code-block-extension-codeLine" data-line-num="6">    });</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>在组件里创建 freezeUser 方法：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">freezeUser</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">freeze</span>(id);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'冻结成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="7">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9">    }</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>
<p>测试下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7335c9dd95b44b299ae1b3d31b1407b5~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2018&amp;h=1258&amp;s=332106&amp;e=gif&amp;f=17&amp;b=fdfdfd" alt="2023-09-12 11.31.21.gif" loading="lazy" class="medium-zoom-image"></p>
<p>然后我们还要把冻结状态显示出来：</p>
<p>这部分数据是返回了的：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31c269f7c7154d7d8224d583e50aaa4f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1112&amp;h=886&amp;s=186990&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>需要添加一列：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c04e56c3e894ffe9e9689e080bf6a69~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1434&amp;h=966&amp;s=160836&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'isFrozen'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="5">        record.<span class="hljs-property">isFrozen</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"success"</span>&gt;</span>已冻结<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span> : <span class="hljs-string">''</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">    )</span>
<span class="code-block-extension-codeLine" data-line-num="7">},</span>
</code></pre>
<p>在类型部分也要添加下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/258e00bdf2f84d6dae979280a4ba4b14~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=602&amp;h=416&amp;s=52472&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>测试下：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/614e0be8869049fb85a050a93f06d113~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2180&amp;h=1218&amp;s=601737&amp;e=gif&amp;f=30&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>冻结之后，刷新页面，会显示已冻结。</p>
<p>这里我们在冻结之后自动刷新下。</p>
<p>这需要把逻辑移到组件内：</p>
<p>把 columns 移到组件内，用 useMemo 包裹，这样只会创建一次：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5cab0f177b4456d91a7d94d8ca2aee7~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1182&amp;h=816&amp;s=66791&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>freeezeUser 也是：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba05e989eca54d48874454ffd34b81d4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1138&amp;h=578&amp;s=114251&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> freezeUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">id</span>: number) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">freeze</span>(id);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'冻结成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="7">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9">    }</span>
<span class="code-block-extension-codeLine" data-line-num="10">}, []);</span>
</code></pre>
<p>添加一个 num 的 state，冻结之后设置一个随机值：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66aac163138c42b192a60cca73446347~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1154&amp;h=898&amp;s=201454&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>把它添加到 useEffect 的依赖里，这样就能触发重新搜索：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e60613c7fcae48cf821a44425d513c84~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=598&amp;h=348&amp;s=36848&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>测试下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5014ff49d8944873831d0316e1cc2879~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2046&amp;h=1072&amp;s=586595&amp;e=gif&amp;f=23&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>但其实现在这个重新搜索有问题：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/001d50c483ff48cfb4d12a04476a74b9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2090&amp;h=992&amp;s=455959&amp;e=gif&amp;f=34&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我搜索之后再冻结，然后刷新就丢失了搜索条件了。</p>
<p>这里需要搜索的时候带上当前的条件：</p>
<p>用 useForm 拿到 form 的 api：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fd64bc4f30b4c10af7b8d88f62682f2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=902&amp;h=492&amp;s=69611&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后在搜索的时候拿到最新的表单值：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d84eb1a8c7d45e4be20a600512d9615~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=964&amp;h=476&amp;s=78143&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title function_">searchUser</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">username</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'username'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="hljs-attr">email</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'email'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-attr">nickName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'nickName'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="6">    });</span>
<span class="code-block-extension-codeLine" data-line-num="7">}, [pageNo, pageSize, num]);</span>
</code></pre>
<p>这样就可以了：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22a0846d2def40c79f567fedb07ffeb6~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2086&amp;h=1192&amp;s=508769&amp;e=gif&amp;f=38&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，用户管理页面就写完了。</p>
<p>全部代码如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Badge</span>, <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Image</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Table</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback, useEffect, useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./UserManage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { freeze, userSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interfaces/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">interface <span class="hljs-title class_">SearchUser</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">nickName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">email</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">interface <span class="hljs-title class_">UserSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">id</span>: number,</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">nickName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">email</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">headPic</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">createTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">isFrozen</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="22">}</span>
<span class="code-block-extension-codeLine" data-line-num="23"></span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-keyword">const</span> [userResult, setUserResult] = useState&lt;<span class="hljs-title class_">UserSearchResult</span>[]&gt;();</span>
<span class="code-block-extension-codeLine" data-line-num="29">    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">UserSearchResult</span>&gt; = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [</span>
<span class="code-block-extension-codeLine" data-line-num="32">        {</span>
<span class="code-block-extension-codeLine" data-line-num="33">            <span class="hljs-attr">title</span>: <span class="hljs-string">'用户名'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'username'</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">        },</span>
<span class="code-block-extension-codeLine" data-line-num="36">        {</span>
<span class="code-block-extension-codeLine" data-line-num="37">            <span class="hljs-attr">title</span>: <span class="hljs-string">'头像'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="38">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'headPic'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="39">            <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="40">                <span class="hljs-keyword">return</span> value ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span></span></span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                        <span class="hljs-attr">width</span>=<span class="hljs-string">{50}</span></span>
<span class="code-block-extension-codeLine" data-line-num="42">                        <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">http:</span>//<span class="hljs-attr">localhost:3005</span>/${<span class="hljs-attr">value</span>}`}</span>
<span class="code-block-extension-codeLine" data-line-num="43">                /&gt; : <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="44">            }</span>
<span class="code-block-extension-codeLine" data-line-num="45">        },</span>
<span class="code-block-extension-codeLine" data-line-num="46">        {</span>
<span class="code-block-extension-codeLine" data-line-num="47">            <span class="hljs-attr">title</span>: <span class="hljs-string">'昵称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'nickName'</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">        },</span>
<span class="code-block-extension-codeLine" data-line-num="50">        {</span>
<span class="code-block-extension-codeLine" data-line-num="51">            <span class="hljs-attr">title</span>: <span class="hljs-string">'邮箱'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="52">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'email'</span></span>
<span class="code-block-extension-codeLine" data-line-num="53">        },</span>
<span class="code-block-extension-codeLine" data-line-num="54">        {</span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-attr">title</span>: <span class="hljs-string">'注册时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="57">        },</span>
<span class="code-block-extension-codeLine" data-line-num="58">        {</span>
<span class="code-block-extension-codeLine" data-line-num="59">            <span class="hljs-attr">title</span>: <span class="hljs-string">'状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="60">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'isFrozen'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="61">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="62">                record.<span class="hljs-property">isFrozen</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"success"</span>&gt;</span>已冻结<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span> : <span class="hljs-string">''</span></span>
<span class="code-block-extension-codeLine" data-line-num="63">            )</span>
<span class="code-block-extension-codeLine" data-line-num="64">        },</span>
<span class="code-block-extension-codeLine" data-line-num="65">        {</span>
<span class="code-block-extension-codeLine" data-line-num="66">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="67">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="68">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {freezeUser(record.id)}}&gt;冻结<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="69">            )</span>
<span class="code-block-extension-codeLine" data-line-num="70">        }</span>
<span class="code-block-extension-codeLine" data-line-num="71">    ], []);</span>
<span class="code-block-extension-codeLine" data-line-num="72">    </span>
<span class="code-block-extension-codeLine" data-line-num="73">    <span class="hljs-keyword">const</span> freezeUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">id</span>: number) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="74">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">freeze</span>(id);</span>
<span class="code-block-extension-codeLine" data-line-num="75">    </span>
<span class="code-block-extension-codeLine" data-line-num="76">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="77">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="78">            message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'冻结成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="79">            <span class="hljs-title function_">setNum</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>())</span>
<span class="code-block-extension-codeLine" data-line-num="80">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="81">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="82">        }</span>
<span class="code-block-extension-codeLine" data-line-num="83">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="84"></span>
<span class="code-block-extension-codeLine" data-line-num="85">    <span class="hljs-keyword">const</span> searchUser = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchUser</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="86">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">userSearch</span>(values.<span class="hljs-property">username</span>,values.<span class="hljs-property">nickName</span>, values.<span class="hljs-property">email</span>, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="87"></span>
<span class="code-block-extension-codeLine" data-line-num="88">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="89">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="90">            <span class="hljs-title function_">setUserResult</span>(data.<span class="hljs-property">users</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: UserSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="91">                <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="92">                    <span class="hljs-attr">key</span>: item.<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="93">                    ...item</span>
<span class="code-block-extension-codeLine" data-line-num="94">                }</span>
<span class="code-block-extension-codeLine" data-line-num="95">            }))</span>
<span class="code-block-extension-codeLine" data-line-num="96">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="97">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="98">        }</span>
<span class="code-block-extension-codeLine" data-line-num="99">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="100"></span>
<span class="code-block-extension-codeLine" data-line-num="101">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="102"></span>
<span class="code-block-extension-codeLine" data-line-num="103">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="104">        <span class="hljs-title function_">searchUser</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="105">            <span class="hljs-attr">username</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'username'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="106">            <span class="hljs-attr">email</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'email'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="107">            <span class="hljs-attr">nickName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'nickName'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="108">        });</span>
<span class="code-block-extension-codeLine" data-line-num="109">    }, [pageNo, pageSize, num]);</span>
<span class="code-block-extension-codeLine" data-line-num="110"></span>
<span class="code-block-extension-codeLine" data-line-num="111">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="112">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="113">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="114">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="115"></span>
<span class="code-block-extension-codeLine" data-line-num="116"></span>
<span class="code-block-extension-codeLine" data-line-num="117">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="118">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="119">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="120">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="121">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchUser}</span></span>
<span class="code-block-extension-codeLine" data-line-num="122">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="123">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="124">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="125">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="126">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"用户名"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="127">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="128">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="129"></span>
<span class="code-block-extension-codeLine" data-line-num="130">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"昵称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"nickName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="131">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="132">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="133"></span>
<span class="code-block-extension-codeLine" data-line-num="134">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"邮箱"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="135">                    { <span class="hljs-attr">type:</span> "<span class="hljs-attr">email</span>", <span class="hljs-attr">message:</span> '请输入合法邮箱地址!'}</span>
<span class="code-block-extension-codeLine" data-line-num="136">                ]}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="137">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="138">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="139"></span>
<span class="code-block-extension-codeLine" data-line-num="140">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="141">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="142">                        搜索用户</span>
<span class="code-block-extension-codeLine" data-line-num="143">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="144">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="145">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="146">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="147">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"userManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="148">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{userResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="149">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="150">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="151">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="152">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="153">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="154">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="155">}</span>
</code></pre>
<p>案例代码上传了<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_frontend_admin" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_frontend_admin" ref="nofollow noopener noreferrer">小册仓库</a>。</p>
<h2 data-id="heading-0">总结</h2>
<p>这节我们实现了管理端的登录和用户管理页面。</p>
<p>和用户端的一样，都是通过 axios interceptor 自动添加 header 和自动 refresh token。</p>
<p>这里涉及到三级路由，第一级展示上面的 header，第二级展示左侧的 menu，第三级才是具体的页面。</p>
<p>使用 table 组件来渲染列表，通过 useEffect 在 pageNo、pageSize 改变的时候自动重发请求。</p>
<p>这样，这两个页面的前后端代码都完成了。</p></div>