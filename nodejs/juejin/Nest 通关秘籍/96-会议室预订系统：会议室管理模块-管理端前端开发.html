<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>后端接口写完了，这节我们来实现下前端页面。</p>
<p>先写管理端的：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1794ecbb9564d5fb3fe5daee2fc6f9a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3114dba5c0d49ac8b24936c8115f7da~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>把管理端项目跑起来：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">arduino</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-arduino code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm run start</span>
</code></pre>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f8ce55ab4d64245b41c0afbdf814dcd~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1474&amp;h=604&amp;s=58621&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们已经添加了对应的路由，但是还没做点击菜单时的切换。</p>
<p>加一下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8724997b0b15470dae4287ede9f06ea3~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1072&amp;h=1144&amp;s=190245&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> <span class="hljs-attr">handleMenuItemClick</span>: <span class="hljs-title class_">MenuClickEventHandler</span> = <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">let</span> path = <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-keyword">switch</span>(info.<span class="hljs-property">key</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="hljs-keyword">case</span> <span class="hljs-string">'1'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="5">            path = <span class="hljs-string">'/meeting_room_manage'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">            <span class="hljs-keyword">break</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-keyword">case</span> <span class="hljs-string">'2'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="8">            path = <span class="hljs-string">'/booking_manage'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">            <span class="hljs-keyword">break</span>;    </span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-keyword">case</span> <span class="hljs-string">'3'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="11">            path = <span class="hljs-string">'/user_manage'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="12">            <span class="hljs-keyword">break</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-keyword">case</span> <span class="hljs-string">'4'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="14">            path = <span class="hljs-string">'/statistics'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="15">            <span class="hljs-keyword">break</span>;                    </span>
<span class="code-block-extension-codeLine" data-line-num="16">    }</span>
<span class="code-block-extension-codeLine" data-line-num="17">    router.<span class="hljs-title function_">navigate</span>(path);</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
</code></pre>
<p>然后写下这 3 个路由的组件：</p>
<p>src/pages/MeetingRoomManage/MeetingRoomManage.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MeetingRoomManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>MeetingRoomManage<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>src/pages/BookingManage/BookingManage.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>BookingManage<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>src/pages/Statistics/Statistics.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Statistics</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Statistics<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>注册这三个组件对应的路由：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/995d49bde91740d48aef4e8e1a182d58~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=980&amp;h=1206&amp;s=166155&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MeetingRoomManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="4">},</span>
<span class="code-block-extension-codeLine" data-line-num="5">{</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">path</span>: <span class="hljs-string">'user_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="8">},</span>
<span class="code-block-extension-codeLine" data-line-num="9">{</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">path</span>: <span class="hljs-string">'meeting_room_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MeetingRoomManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="12">},</span>
<span class="code-block-extension-codeLine" data-line-num="13">{</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">path</span>: <span class="hljs-string">'booking_manage'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BookingManage</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="16">},</span>
<span class="code-block-extension-codeLine" data-line-num="17">{</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">path</span>: <span class="hljs-string">'statistics'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Statistics</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="20">}</span>
</code></pre>
<p>测试下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45f96bcdbcc548d19d1f697f552d2d55~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1696&amp;h=1058&amp;s=358284&amp;e=gif&amp;f=39&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后还要加上页面刷新时选中对应菜单项的逻辑：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae4b1d66356e49ab8f886296e87debe9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1094&amp;h=982&amp;s=168638&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getSelectedKeys</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/user_manage'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'3'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="6">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/booking_manage'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'2'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="8">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/meeting_room_manage'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'1'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="10">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/statistics'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'4'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="12">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-keyword">return</span> [<span class="hljs-string">'1'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="14">    }</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
</code></pre>
<p>这样，刷新后也会选中对应的菜单项：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a9ca939b7c247b3ae0fdb8451b81526~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1288&amp;h=772&amp;s=210113&amp;e=gif&amp;f=39&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后来实现会议室管理页面：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1794ecbb9564d5fb3fe5daee2fc6f9a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>和我们前面写过的用户列表差不多：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Badge</span>, <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Image</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Table</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback, useEffect, useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./meeting_room_manage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">interface <span class="hljs-title class_">SearchMeetingRoom</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
<span class="code-block-extension-codeLine" data-line-num="12"></span>
<span class="code-block-extension-codeLine" data-line-num="13">interface <span class="hljs-title class_">MeetingRoomSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">id</span>: number,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">location</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">description</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">isBooked</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">createTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">updateTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="23">}</span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MeetingRoomManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="29">    <span class="hljs-keyword">const</span> [meetingRoomResult, setMeetingRoomResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">MeetingRoomSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">MeetingRoomSearchResult</span>&gt; = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [</span>
<span class="code-block-extension-codeLine" data-line-num="32">        {</span>
<span class="code-block-extension-codeLine" data-line-num="33">            <span class="hljs-attr">title</span>: <span class="hljs-string">'名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'name'</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">        },</span>
<span class="code-block-extension-codeLine" data-line-num="36">        {</span>
<span class="code-block-extension-codeLine" data-line-num="37">            <span class="hljs-attr">title</span>: <span class="hljs-string">'容纳人数'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="38">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'capacity'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="39">        },</span>
<span class="code-block-extension-codeLine" data-line-num="40">        {</span>
<span class="code-block-extension-codeLine" data-line-num="41">            <span class="hljs-attr">title</span>: <span class="hljs-string">'位置'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'location'</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">        },</span>
<span class="code-block-extension-codeLine" data-line-num="44">        {</span>
<span class="code-block-extension-codeLine" data-line-num="45">            <span class="hljs-attr">title</span>: <span class="hljs-string">'设备'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="46">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'equipment'</span></span>
<span class="code-block-extension-codeLine" data-line-num="47">        },</span>
<span class="code-block-extension-codeLine" data-line-num="48">        {</span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="50">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">        },</span>
<span class="code-block-extension-codeLine" data-line-num="52">        {</span>
<span class="code-block-extension-codeLine" data-line-num="53">            <span class="hljs-attr">title</span>: <span class="hljs-string">'添加时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="54">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="55">        },</span>
<span class="code-block-extension-codeLine" data-line-num="56">        {</span>
<span class="code-block-extension-codeLine" data-line-num="57">            <span class="hljs-attr">title</span>: <span class="hljs-string">'上次更新时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="58">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'updateTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="59">        },</span>
<span class="code-block-extension-codeLine" data-line-num="60">        {</span>
<span class="code-block-extension-codeLine" data-line-num="61">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="62">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'isBooked'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="64">                record.<span class="hljs-property">isBooked</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"error"</span>&gt;</span>已被预订<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"success"</span>&gt;</span>可预定<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="65">            )</span>
<span class="code-block-extension-codeLine" data-line-num="66">        },</span>
<span class="code-block-extension-codeLine" data-line-num="67">        {</span>
<span class="code-block-extension-codeLine" data-line-num="68">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="69">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="70">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {}}&gt;删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="71">            )</span>
<span class="code-block-extension-codeLine" data-line-num="72">        }</span>
<span class="code-block-extension-codeLine" data-line-num="73">    ], []);</span>
<span class="code-block-extension-codeLine" data-line-num="74"></span>
<span class="code-block-extension-codeLine" data-line-num="75">    <span class="hljs-keyword">const</span> searchMeetingRoom = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchMeetingRoom</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="76">        </span>
<span class="code-block-extension-codeLine" data-line-num="77">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="78"></span>
<span class="code-block-extension-codeLine" data-line-num="79">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="80"></span>
<span class="code-block-extension-codeLine" data-line-num="81">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="82">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="83">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="84">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="85"></span>
<span class="code-block-extension-codeLine" data-line-num="86"></span>
<span class="code-block-extension-codeLine" data-line-num="87">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"meetingRoomManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="88">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"meetingRoomManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="89">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="90">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="91">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchMeetingRoom}</span></span>
<span class="code-block-extension-codeLine" data-line-num="92">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="93">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="94">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="95">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="96">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="97">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="99"></span>
<span class="code-block-extension-codeLine" data-line-num="100">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"容纳人数"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"capacity"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="101">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="102">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="103"></span>
<span class="code-block-extension-codeLine" data-line-num="104">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"location"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="105">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="106">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="107"></span>
<span class="code-block-extension-codeLine" data-line-num="108">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="109">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="110">                        搜索会议室</span>
<span class="code-block-extension-codeLine" data-line-num="111">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="112">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{background:</span> '<span class="hljs-attr">green</span>'}}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="113">                        添加会议室</span>
<span class="code-block-extension-codeLine" data-line-num="114">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="115"></span>
<span class="code-block-extension-codeLine" data-line-num="116">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="117">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="118">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="119">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"meetingRoomManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="120">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{meetingRoomResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="121">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="122">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="123">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="124">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="125">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="126">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="127">}</span>
</code></pre>
<p>css 部分如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#meetingRoomManage-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-selector-id">#meetingRoomManage-container</span> <span class="hljs-selector-class">.meetingRoomManage-form</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">40px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8d1a062e0ae7431c9d6f380922780a43~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2342&amp;h=826&amp;s=125953&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后我们在 interfaces.ts 添加 list 接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">meetingRoomList</span>(<span class="hljs-params">name: string, capacity: number, equipment: string, pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/meeting-room/list'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">            name,</span>
<span class="code-block-extension-codeLine" data-line-num="5">            capacity,</span>
<span class="code-block-extension-codeLine" data-line-num="6">            equipment,</span>
<span class="code-block-extension-codeLine" data-line-num="7">            pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="8">            pageSize</span>
<span class="code-block-extension-codeLine" data-line-num="9">        }</span>
<span class="code-block-extension-codeLine" data-line-num="10">    });</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>
<p>在页面调用下：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40438a251bb64c80b5e448392f4857d6~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1454&amp;h=970&amp;s=258407&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> searchMeetingRoom = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchMeetingRoom</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">meetingRoomList</span>(values.<span class="hljs-property">name</span>, values.<span class="hljs-property">capacity</span>, values.<span class="hljs-property">equipment</span>, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-title function_">setMeetingRoomResult</span>(data.<span class="hljs-property">meetingRooms</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: MeetingRoomSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">            <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">                <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">                ...item</span>
<span class="code-block-extension-codeLine" data-line-num="10">            }</span>
<span class="code-block-extension-codeLine" data-line-num="11">        }))</span>
<span class="code-block-extension-codeLine" data-line-num="12">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">    }</span>
<span class="code-block-extension-codeLine" data-line-num="15">}, []);</span>
</code></pre>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21b3b4e387944c8893e47cc856bc95c4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2324&amp;h=982&amp;s=196826&amp;e=gif&amp;f=20&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>按名称搜索：
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fa819c3070e44c7a43188a3fd2b85a4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2300&amp;h=762&amp;s=137368&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image">
按容量搜索：
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eda249542e914c2580a8b541bcf49ca9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2242&amp;h=730&amp;s=133129&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image">
按设备搜索：
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c28ee1967c7648f1a229604f396d143c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2294&amp;h=774&amp;s=149778&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后，最开始进入页面的时候也得搜索一次：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc660f43cb5b40d999e97e8d207823ad~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1318&amp;h=748&amp;s=171967&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title function_">searchMeetingRoom</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">name</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'name'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="hljs-attr">capacity</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'capacity'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-attr">equipment</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'equipment'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="6">    });</span>
<span class="code-block-extension-codeLine" data-line-num="7">}, [pageNo, pageSize]);</span>
</code></pre>
<p>最开始搜索一次，并且分页信息变了也重新搜索。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3bd408655f574dda83164405f61f0534~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2254&amp;h=1036&amp;s=277659&amp;e=gif&amp;f=23&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，刚进入页面就会触发一次搜索。</p>
<p>然后我们处理删除：</p>
<p>在 interfaces.ts 里添加 delete 接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteMeetingRoom</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'/meeting-room/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>然后添加删除按钮的处理逻辑：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c1798fa0512c42f6be7d5838bbbf5c5f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1194&amp;h=656&amp;s=128749&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;a href=<span class="hljs-string">"#"</span> onClick={<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleDelete</span>(record.<span class="hljs-property">id</span>)}&gt;删除&lt;/a&gt;</span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> handleDelete = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">id</span>: number) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">try</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-keyword">await</span> <span class="hljs-title function_">deleteMeetingRoom</span>(id);</span>
<span class="code-block-extension-codeLine" data-line-num="4">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'删除成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="5">    } <span class="hljs-keyword">catch</span>(e) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);</span>
<span class="code-block-extension-codeLine" data-line-num="7">        message.<span class="hljs-title function_">error</span>(<span class="hljs-string">'删除失败'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="8">    }</span>
<span class="code-block-extension-codeLine" data-line-num="9">}, []);</span>
</code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/032baf5b1ad64b2cafce036cd66fdce7~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2322&amp;h=1084&amp;s=462345&amp;e=gif&amp;f=32&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>提示删除成功，刷新后也确实没有了。</p>
<p>不过应该是删除后自动刷新的。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8170f3b591d469b993074b456fb0cb6~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1320&amp;h=1174&amp;s=260346&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们添加一个状态，删除后设置一个随机数，然后把它作为 useEffect 的依赖，这样就能触发重新搜索。</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [num, setNum] = useState&lt;number&gt;();</span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-title function_">setNum</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());</span>
</code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/022e8697a73f4c058f8240c3d8c52fe4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2302&amp;h=948&amp;s=315490&amp;e=gif&amp;f=23&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>不过，删除操作最好加上个二次确认。</p>
<p>这个把按钮抱一下就好了：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">            <span class="hljs-attr">title</span>=<span class="hljs-string">"会议室删除"</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">            <span class="hljs-attr">description</span>=<span class="hljs-string">"确认删除吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">            <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; handleDelete(record.id)}</span>
<span class="code-block-extension-codeLine" data-line-num="8">            okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="9">            cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="10">        &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="11">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">        <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="13">    )</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
</code></pre>
<p>这样，点击后就会出现一个确认框，确认后才会删除：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6747000bbf44fb3bffdd128423fae70~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=850&amp;h=508&amp;s=60368&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后实现添加会议室：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3114dba5c0d49ac8b24936c8115f7da~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们在 MeetingRoomManage 的同级添加一个 CreateMeetingRoomModal 组件：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">interface <span class="hljs-title class_">CreateMeetingRoomModalProps</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">isOpen</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">handleClose</span>: <span class="hljs-title class_">Function</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateMeetingRoomModal</span>(<span class="hljs-params">props: CreateMeetingRoomModalProps</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-keyword">const</span> handleOk = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="12">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="13">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="14"></span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"创建会议室"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">{props.isOpen}</span> <span class="hljs-attr">onOk</span>=<span class="hljs-string">{handleOk}</span> <span class="hljs-attr">onCancel</span>=<span class="hljs-string">{()</span> =&gt;</span> props.handleClose()}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="16">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>xxxx<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
</code></pre>
<p>组件里有一个 Modal，通过参数 isOpen 控制是否显示。</p>
<p>当点击取消的时候，或者确认的时候，都会调用 props.handleClose 方法。</p>
<p>然后在 MeetingRoomManage 引入它：</p>
<p>先添加一个状态代表 modal 是否打开：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9df0fc3c2f24eb2be4377a5a964db6b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1234&amp;h=346&amp;s=116053&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [isCreateModalOpen, setIsCreateModalOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);</span>
</code></pre>
<p>然后添加 Modal 组件，并且点击按钮的时候 open：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24bd2799151c45789b52e3a3ab594a9b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1392&amp;h=948&amp;s=223724&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;<span class="hljs-title class_">Button</span> type=<span class="hljs-string">"primary"</span> style={{<span class="hljs-attr">background</span>: <span class="hljs-string">'green'</span>}} onClick={</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsCreateModalOpen</span>(<span class="hljs-literal">true</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="3">}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    添加会议室</span>
<span class="code-block-extension-codeLine" data-line-num="5">&lt;/<span class="hljs-title class_">Button</span>&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;<span class="hljs-title class_">CreateMeetingRoomModal</span> isOpen={isCreateModalOpen} handleClose={<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title function_">setIsCreateModalOpen</span>(<span class="hljs-literal">false</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3">}}&gt;&lt;/<span class="hljs-title class_">CreateMeetingRoomModal</span>&gt;</span>
</code></pre>
<p>这样，modal 就添加成功了：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c461d0f83e0740ac82fdd7e786ec841d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2056&amp;h=1014&amp;s=990477&amp;e=gif&amp;f=32&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后实现 modal 的具体逻辑，创建会议室：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>,<span class="hljs-title class_">InputNumber</span>, <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TextArea</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/input/TextArea"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">interface <span class="hljs-title class_">CreateMeetingRoomModalProps</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">isOpen</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">handleClose</span>: <span class="hljs-title class_">Function</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-keyword">const</span> layout = {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">labelCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">6</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">wrapperCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">18</span> }</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
<span class="code-block-extension-codeLine" data-line-num="14"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">CreateMeetingRoom</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">location</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">description</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="20">}</span>
<span class="code-block-extension-codeLine" data-line-num="21"></span>
<span class="code-block-extension-codeLine" data-line-num="22"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateMeetingRoomModal</span>(<span class="hljs-params">props: CreateMeetingRoomModalProps</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="23"></span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-keyword">const</span> [form] = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-keyword">const</span> handleOk = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="27">        <span class="hljs-keyword">const</span> values = form.<span class="hljs-title function_">getFieldsValue</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="28">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="29"></span>
<span class="code-block-extension-codeLine" data-line-num="30">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="31">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="32"></span>
<span class="code-block-extension-codeLine" data-line-num="33">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"创建会议室"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">{props.isOpen}</span> <span class="hljs-attr">onOk</span>=<span class="hljs-string">{handleOk}</span> <span class="hljs-attr">onCancel</span>=<span class="hljs-string">{()</span> =&gt;</span> props.handleClose()} okText={'创建'}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="34">        <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="35">            <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="36">            <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="37">            {<span class="hljs-attr">...layout</span>}</span>
<span class="code-block-extension-codeLine" data-line-num="38">        &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="39">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="40">                <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span></span>
<span class="code-block-extension-codeLine" data-line-num="42">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="43">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室名称!' },</span>
<span class="code-block-extension-codeLine" data-line-num="44">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="45">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="46">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="47">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="49">                <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-attr">name</span>=<span class="hljs-string">"location"</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="52">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室位置!' },</span>
<span class="code-block-extension-codeLine" data-line-num="53">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="54">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="55">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="57">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-attr">label</span>=<span class="hljs-string">"容纳人数"</span></span>
<span class="code-block-extension-codeLine" data-line-num="59">                <span class="hljs-attr">name</span>=<span class="hljs-string">"capacity"</span></span>
<span class="code-block-extension-codeLine" data-line-num="60">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="61">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室容量!' },</span>
<span class="code-block-extension-codeLine" data-line-num="62">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="63">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="64">                <span class="hljs-tag">&lt;<span class="hljs-name">InputNumber</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="65">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="66">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="67">                <span class="hljs-attr">label</span>=<span class="hljs-string">"设备"</span></span>
<span class="code-block-extension-codeLine" data-line-num="68">                <span class="hljs-attr">name</span>=<span class="hljs-string">"equipment"</span></span>
<span class="code-block-extension-codeLine" data-line-num="69">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="70">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="71">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="72">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="73">                <span class="hljs-attr">label</span>=<span class="hljs-string">"描述"</span></span>
<span class="code-block-extension-codeLine" data-line-num="74">                <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span></span>
<span class="code-block-extension-codeLine" data-line-num="75">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="76">                <span class="hljs-tag">&lt;<span class="hljs-name">TextArea</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="77">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="78">        <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="79">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="80">}</span>
</code></pre>
<p>在 modal 里添加一个表单，点击创建按钮的时候打印表单值。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24d81c5e8ef04636b52c13c5077f38be~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1648&amp;h=1264&amp;s=203734&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们在 interfaces.ts 添加创建会议室的接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createMeetingRoom</span>(<span class="hljs-params">meetingRoom: CreateMeetingRoom</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/meeting-room/create'</span>, meetingRoom);</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>在组件里调用下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71166d4c140b47b99c62b8752aad2d0d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1044&amp;h=668&amp;s=147888&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [form] = useForm&lt;<span class="hljs-title class_">CreateMeetingRoom</span>&gt;();</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> handleOk = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">const</span> values = form.<span class="hljs-title function_">getFieldsValue</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">    values.<span class="hljs-property">description</span> = values.<span class="hljs-property">description</span> || <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    values.<span class="hljs-property">equipment</span> = values.<span class="hljs-property">equipment</span> || <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createMeetingRoom</span>(values);</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="12">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'创建成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="13">        form.<span class="hljs-title function_">resetFields</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="14">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="15">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="16">        message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="17">    }</span>
<span class="code-block-extension-codeLine" data-line-num="18">}, []);</span>
</code></pre>
<p>如果没有填 description 或者 equipment 就设置个空字符串。</p>
<p>测试下：</p>
<p>创建失败时：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b4bd79f88cd4dc6841d8c84110d1b28~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1896&amp;h=1126&amp;s=216434&amp;e=gif&amp;f=19&amp;b=969696" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>创建成功时：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aedbcbf0b7004c55acc6f1143ef310c5~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2226&amp;h=1060&amp;s=630734&amp;e=gif&amp;f=41&amp;b=969696" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>创建成功后，手动刷新页面，就看到了新的会议室。</p>
<p>然后我们在关掉弹窗的时候设置下 num。</p>
<p>这样就会触发列表数据的刷新：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f6fb387eb6db4015972e96b12025627a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1094&amp;h=452&amp;s=117163&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd129212c13d4201956394f5ce6acec1~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1072&amp;h=460&amp;s=109464&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>测试下：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/010c397e23d74607b7c2c6f82352da77~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2052&amp;h=986&amp;s=536818&amp;e=gif&amp;f=17&amp;b=969696" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>最后，加上更新会议室的功能：</p>
<p>创建 UpdateMeetingRoom.tsx</p>
<p>内容和 create 的基本一样：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">InputNumber</span>, <span class="hljs-title class_">Modal</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-title class_">TextArea</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/input/TextArea"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { updateMeetingRoom } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interfaces/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">interface <span class="hljs-title class_">UpdateMeetingRoomModalProps</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">isOpen</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">handleClose</span>: <span class="hljs-title class_">Function</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"><span class="hljs-keyword">const</span> layout = {</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">labelCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">6</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">wrapperCol</span>: { <span class="hljs-attr">span</span>: <span class="hljs-number">18</span> }</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">UpdateMeetingRoom</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">location</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">description</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="22">}</span>
<span class="code-block-extension-codeLine" data-line-num="23"></span>
<span class="code-block-extension-codeLine" data-line-num="24"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateMeetingRoomModal</span>(<span class="hljs-params">props: UpdateMeetingRoomModalProps</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-keyword">const</span> [form] = useForm&lt;<span class="hljs-title class_">UpdateMeetingRoom</span>&gt;();</span>
<span class="code-block-extension-codeLine" data-line-num="27"></span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-keyword">const</span> handleOk = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="29">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="30">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="31"></span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"更新会议室"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">{props.isOpen}</span> <span class="hljs-attr">onOk</span>=<span class="hljs-string">{handleOk}</span> <span class="hljs-attr">onCancel</span>=<span class="hljs-string">{()</span> =&gt;</span> props.handleClose()} okText={'更新'}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="33">        <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">            <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="36">            {<span class="hljs-attr">...layout</span>}</span>
<span class="code-block-extension-codeLine" data-line-num="37">        &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="38">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="39">                <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span></span>
<span class="code-block-extension-codeLine" data-line-num="40">                <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="42">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室名称!' },</span>
<span class="code-block-extension-codeLine" data-line-num="43">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="44">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="45">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="46">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="47">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="48">                <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span></span>
<span class="code-block-extension-codeLine" data-line-num="49">                <span class="hljs-attr">name</span>=<span class="hljs-string">"location"</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室位置!' },</span>
<span class="code-block-extension-codeLine" data-line-num="52">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="53">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="54">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="57">                <span class="hljs-attr">label</span>=<span class="hljs-string">"容纳人数"</span></span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-attr">name</span>=<span class="hljs-string">"capacity"</span></span>
<span class="code-block-extension-codeLine" data-line-num="59">                <span class="hljs-attr">rules</span>=<span class="hljs-string">{[</span></span>
<span class="code-block-extension-codeLine" data-line-num="60">                    { <span class="hljs-attr">required:</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">message:</span> '请输入会议室容量!' },</span>
<span class="code-block-extension-codeLine" data-line-num="61">                ]}</span>
<span class="code-block-extension-codeLine" data-line-num="62">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="63">                <span class="hljs-tag">&lt;<span class="hljs-name">InputNumber</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="64">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="65">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="66">                <span class="hljs-attr">label</span>=<span class="hljs-string">"设备"</span></span>
<span class="code-block-extension-codeLine" data-line-num="67">                <span class="hljs-attr">name</span>=<span class="hljs-string">"equipment"</span></span>
<span class="code-block-extension-codeLine" data-line-num="68">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="69">                <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="71">            <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="72">                <span class="hljs-attr">label</span>=<span class="hljs-string">"描述"</span></span>
<span class="code-block-extension-codeLine" data-line-num="73">                <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span></span>
<span class="code-block-extension-codeLine" data-line-num="74">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="75">                <span class="hljs-tag">&lt;<span class="hljs-name">TextArea</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="76">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="77">        <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="78">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="79">}</span>
</code></pre>
<p>在 interfaces.ts里创建会用到的接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMeetingRoom</span>(<span class="hljs-params">meetingRoom: UpdateMeetingRoom</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">put</span>(<span class="hljs-string">'/meeting-room/update'</span>, meetingRoom);</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">findMeetingRoom</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/meeting-room/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>然后在 MeetingRoomManage 组件引入：</p>
<p>先创建两个 state：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/17b96f6f6bf04ecca604cac431b5e3bb~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1124&amp;h=342&amp;s=122932&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> [isUpdateModalOpen, setIsUpdateModalOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">const</span> [updateId, setUpdateId] = useState&lt;number&gt;();</span>
</code></pre>
<p>一个是 update 弹窗是否打开，一个是当前的 id。</p>
<p>然后添加一个更新按钮，点击的时候打开弹出弹窗，设置 id：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24bed2dffe4e4cb8bcba896b8e159d5b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1026&amp;h=804&amp;s=137317&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">            <span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="6">                <span class="hljs-attr">title</span>=<span class="hljs-string">"会议室删除"</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">                <span class="hljs-attr">description</span>=<span class="hljs-string">"确认删除吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">                <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; handleDelete(record.id)}</span>
<span class="code-block-extension-codeLine" data-line-num="9">                okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="10">                cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="11">            &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="12">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="13">            <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="14">            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="15">            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="16">                setIsUpdateModalOpen(true);</span>
<span class="code-block-extension-codeLine" data-line-num="17">                setUpdateId(record.id);</span>
<span class="code-block-extension-codeLine" data-line-num="18">            }}&gt;更新<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="19">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="20">    )</span>
<span class="code-block-extension-codeLine" data-line-num="21">}</span>
</code></pre>
<p>在下面加上弹窗：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c59b24a46f7b4932997a00ebc67c442f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1018&amp;h=524&amp;s=127330&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;<span class="hljs-title class_">UpdateMeetingRoomModal</span> isOpen={isUpdateModalOpen} handleClose={<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title function_">setIsUpdateModalOpen</span>(<span class="hljs-literal">false</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-title function_">setNum</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());</span>
<span class="code-block-extension-codeLine" data-line-num="4">}}&gt;&lt;/<span class="hljs-title class_">UpdateMeetingRoomModal</span>&gt;</span>
</code></pre>
<p>这样更新弹窗就加上了：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/353b73b58db547d9ab662522a1190adf~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1966&amp;h=990&amp;s=1561529&amp;e=gif&amp;f=36&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后我们要把 id 传过去：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b80d3d07bab748f48247c6d5ad44946c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1084&amp;h=256&amp;s=81925&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>updateId 的默认值是 undefined，可能为空，加上 ! 代表非空。</p>
<p>然后在组件里添加这个参数：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2727b87815e843f294a8a3c059eccb20~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=682&amp;h=392&amp;s=81006&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>并且调用查询接口，查询 id 对应的数据来回显：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04366194b9c84a368c61e2e565cb38e3~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1190&amp;h=960&amp;s=207490&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">query</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-keyword">if</span>(!props.<span class="hljs-property">id</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">            <span class="hljs-keyword">return</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5">        }</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findMeetingRoom</span>(props.<span class="hljs-property">id</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-keyword">const</span> { data } = res;</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'id'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">id</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="11">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'name'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="12">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'location'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">location</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="13">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'capacity'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">capacity</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'equipment'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">equipment</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="15">            form.<span class="hljs-title function_">setFieldValue</span>(<span class="hljs-string">'description'</span>, data.<span class="hljs-property">data</span>.<span class="hljs-property">description</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="16">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="17">            message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="18">        }</span>
<span class="code-block-extension-codeLine" data-line-num="19">    }</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-title function_">query</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="22">}, [props.<span class="hljs-property">id</span>]);</span>
</code></pre>
<p>现在就能回显数据了：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35364c988d8445b09a70628b5ebe46bf~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2064&amp;h=1100&amp;s=1571260&amp;e=gif&amp;f=42&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后再加上更新数据的接口：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/441e992f6e5848c09048d12b3c2d1451~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=894&amp;h=748&amp;s=145567&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> handleOk = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> values = form.<span class="hljs-title function_">getFieldsValue</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">    values.<span class="hljs-property">description</span> = values.<span class="hljs-property">description</span> || <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    values.<span class="hljs-property">equipment</span> = values.<span class="hljs-property">equipment</span> || <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateMeetingRoom</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="8">        ...values,</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-attr">id</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'id'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="10">    });</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'更新成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">        props.<span class="hljs-title function_">handleClose</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="15">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="16">        message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="17">    }</span>
<span class="code-block-extension-codeLine" data-line-num="18">}, []);</span>
</code></pre>
<p>这里要的参数要额外带上 id。</p>
<p>测试下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac548b59d5964adbbdd7aa5b0cd2f903~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1932&amp;h=1076&amp;s=789169&amp;e=gif&amp;f=45&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>更新成功了。</p>
<p>这样，会议室管理的页面就完成了。</p>
<p>案例代码上传了<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_frontend_admin" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_frontend_admin" ref="nofollow noopener noreferrer">小册仓库</a>。</p>
<h2 data-id="heading-0">总结</h2>
<p>这节我们实现了会议室管理的前端页面。</p>
<p>实现了列表、分页和搜索，添加会议室、更新会议室、删除会议室。</p>
<p>其中添加和更新会议室需要创建 Modal，我们把它拆分成了单独的组件。</p>
<p>更新会议室的时候，传入 id，根据 id 回显数据，然后修改完以后再更新数据。</p>
<p>至此，会议室管理的后端和前端代码就都完成了。</p></div>