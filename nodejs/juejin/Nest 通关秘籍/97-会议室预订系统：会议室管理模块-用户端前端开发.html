<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>这节来写用户端的会议室列表：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5a6f760e036d49bab8ff8191b8c5a8ff~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>现在，用户端首页是这样的：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fcfd2a1c94b4a2299380e024f721234~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1858&amp;h=1090&amp;s=79837&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>需要在 / 下添加一个二级路由：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2686beddeddc481a928da0208d7bd2b1~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=864&amp;h=1082&amp;s=137849&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Menu</span>/&gt;</span></span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">children</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="5">      {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MeetingRoomList</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="8">      },</span>
<span class="code-block-extension-codeLine" data-line-num="9">      {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-attr">path</span>: <span class="hljs-string">'meeting_room_list'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MeetingRoomList</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="12">      },</span>
<span class="code-block-extension-codeLine" data-line-num="13">      {</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-attr">path</span>: <span class="hljs-string">'booking_history'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="15">        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BookingHistory</span>/&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="16">      }</span>
<span class="code-block-extension-codeLine" data-line-num="17">    ]</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
</code></pre>
<p>然后分别实现这三个组件：</p>
<p>src/page/menu/Menu.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span>, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Menu</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">AntdMenu</span>, <span class="hljs-title class_">MenuProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./menu.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MenuClickEventHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"rc-menu/lib/interface"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { router } <span class="hljs-keyword">from</span> <span class="hljs-string">"../.."</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">const</span> <span class="hljs-attr">items</span>: <span class="hljs-title class_">MenuProps</span>[<span class="hljs-string">'items'</span>] = [</span>
<span class="code-block-extension-codeLine" data-line-num="8">    {</span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="10">        <span class="hljs-attr">label</span>: <span class="hljs-string">"会议室列表"</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">    },</span>
<span class="code-block-extension-codeLine" data-line-num="12">    {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-attr">label</span>: <span class="hljs-string">"预定历史"</span></span>
<span class="code-block-extension-codeLine" data-line-num="15">    }</span>
<span class="code-block-extension-codeLine" data-line-num="16">];</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18"><span class="hljs-keyword">const</span> <span class="hljs-attr">handleMenuItemClick</span>: <span class="hljs-title class_">MenuClickEventHandler</span> = <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-keyword">let</span> path = <span class="hljs-string">''</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-keyword">switch</span>(info.<span class="hljs-property">key</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="21">        <span class="hljs-keyword">case</span> <span class="hljs-string">'1'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="22">            path = <span class="hljs-string">'/meeting_room_list'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="23">            <span class="hljs-keyword">break</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="24">        <span class="hljs-keyword">case</span> <span class="hljs-string">'2'</span>:</span>
<span class="code-block-extension-codeLine" data-line-num="25">            path = <span class="hljs-string">'/booking_history'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="26">            <span class="hljs-keyword">break</span>;              </span>
<span class="code-block-extension-codeLine" data-line-num="27">    }</span>
<span class="code-block-extension-codeLine" data-line-num="28">    router.<span class="hljs-title function_">navigate</span>(path);</span>
<span class="code-block-extension-codeLine" data-line-num="29">}</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31"></span>
<span class="code-block-extension-codeLine" data-line-num="32"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Menu</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="33"></span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="35"></span>
<span class="code-block-extension-codeLine" data-line-num="36">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSelectedKeys</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="37">        <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/meeting_room_list'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="38">            <span class="hljs-keyword">return</span> [<span class="hljs-string">'1'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="39">        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(location.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/booking_history'</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="40">            <span class="hljs-keyword">return</span> [<span class="hljs-string">'2'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="41">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-keyword">return</span> [<span class="hljs-string">'1'</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="43">        }</span>
<span class="code-block-extension-codeLine" data-line-num="44">    }</span>
<span class="code-block-extension-codeLine" data-line-num="45"></span>
<span class="code-block-extension-codeLine" data-line-num="46">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"menu-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="47">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"menu-area"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-tag">&lt;<span class="hljs-name">AntdMenu</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="49">                <span class="hljs-attr">defaultSelectedKeys</span>=<span class="hljs-string">{getSelectedKeys()}</span></span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleMenuItemClick}</span></span>
<span class="code-block-extension-codeLine" data-line-num="52">            /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="53">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="54">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content-area"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="56">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="57">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="58">}</span>
</code></pre>
<p>引入 antd 的 Menu 实现菜单。</p>
<p>渲染的时候根据 useLocation 拿到的 pathname 来设置选中的菜单项。</p>
<p>点击菜单项的时候用 router.push 修改路径。</p>
<p>这里用到的 router 需要在 index.tsx 导出：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ca0768b34944f0998bf1ac57f3a2d4f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=912&amp;h=474&amp;s=92107&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这些我们前面写过一遍。</p>
<p>menu.css 如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#menu-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">display</span>: flex;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attribute">flex-direction</span>: row;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-selector-id">#menu-container</span> <span class="hljs-selector-class">.menu-area</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>
<p>然后是 src/pages/meeting_room_list/MeetingRoomList.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MeetingRoomList</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>MeetingRoomList<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>还有 src/pages/booking_history/BookingHistory.tsx</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingHistory</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>BookingHistory<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>
<p>在 index.tsx 里导入这些组件后，我们跑起来看看：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">arduino</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-arduino code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm run start:dev</span>
</code></pre>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/446fb7e3ff6a47ecacba283b2a8a1a96~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1262&amp;h=612&amp;s=179976&amp;e=gif&amp;f=28&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>点击菜单项的路由切换，以及刷新选中对应菜单项，都没问题。</p>
<p>然后来写下列表页面，其实这个和管理端的会议室列表差不多：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5a6f760e036d49bab8ff8191b8c5a8ff~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们把那个复制过来改改。</p>
<p>首先，在 interfaces.ts 添加用到的接口：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchMeetingRoomList</span>(<span class="hljs-params">name: string, capacity: number, equipment: string, pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/meeting-room/list'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">            name,</span>
<span class="code-block-extension-codeLine" data-line-num="5">            capacity,</span>
<span class="code-block-extension-codeLine" data-line-num="6">            equipment,</span>
<span class="code-block-extension-codeLine" data-line-num="7">            pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="8">            pageSize</span>
<span class="code-block-extension-codeLine" data-line-num="9">        }</span>
<span class="code-block-extension-codeLine" data-line-num="10">    });</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>
<p>然后写下列表：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Badge</span>, <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Popconfirm</span>, <span class="hljs-title class_">Table</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useCallback, useEffect, useMemo, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> <span class="hljs-string">'./meeting_room_list.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { searchMeetingRoomList } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interface/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">interface <span class="hljs-title class_">SearchMeetingRoom</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">interface <span class="hljs-title class_">MeetingRoomSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">id</span>: number,</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">location</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">description</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">isBooked</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">createTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">updateTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MeetingRoomList</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="29"></span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-keyword">const</span> [meetingRoomResult, setMeetingRoomResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">MeetingRoomSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="31"></span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">MeetingRoomSearchResult</span>&gt; = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [</span>
<span class="code-block-extension-codeLine" data-line-num="33">        {</span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-attr">title</span>: <span class="hljs-string">'名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="35">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'name'</span></span>
<span class="code-block-extension-codeLine" data-line-num="36">        },</span>
<span class="code-block-extension-codeLine" data-line-num="37">        {</span>
<span class="code-block-extension-codeLine" data-line-num="38">            <span class="hljs-attr">title</span>: <span class="hljs-string">'容纳人数'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="39">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'capacity'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="40">        },</span>
<span class="code-block-extension-codeLine" data-line-num="41">        {</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-attr">title</span>: <span class="hljs-string">'位置'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="43">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'location'</span></span>
<span class="code-block-extension-codeLine" data-line-num="44">        },</span>
<span class="code-block-extension-codeLine" data-line-num="45">        {</span>
<span class="code-block-extension-codeLine" data-line-num="46">            <span class="hljs-attr">title</span>: <span class="hljs-string">'设备'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="47">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'equipment'</span></span>
<span class="code-block-extension-codeLine" data-line-num="48">        },</span>
<span class="code-block-extension-codeLine" data-line-num="49">        {</span>
<span class="code-block-extension-codeLine" data-line-num="50">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="51">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="52">        },</span>
<span class="code-block-extension-codeLine" data-line-num="53">        {</span>
<span class="code-block-extension-codeLine" data-line-num="54">            <span class="hljs-attr">title</span>: <span class="hljs-string">'添加时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="56">        },</span>
<span class="code-block-extension-codeLine" data-line-num="57">        {</span>
<span class="code-block-extension-codeLine" data-line-num="58">            <span class="hljs-attr">title</span>: <span class="hljs-string">'上次更新时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="59">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'updateTime'</span></span>
<span class="code-block-extension-codeLine" data-line-num="60">        },</span>
<span class="code-block-extension-codeLine" data-line-num="61">        {</span>
<span class="code-block-extension-codeLine" data-line-num="62">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'isBooked'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="64">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="65">                record.<span class="hljs-property">isBooked</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"error"</span>&gt;</span>已被预订<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">status</span>=<span class="hljs-string">"success"</span>&gt;</span>可预定<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="66">            )</span>
<span class="code-block-extension-codeLine" data-line-num="67">        },</span>
<span class="code-block-extension-codeLine" data-line-num="68">        {</span>
<span class="code-block-extension-codeLine" data-line-num="69">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="71">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="72">                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>预定<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="73">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="74">            )</span>
<span class="code-block-extension-codeLine" data-line-num="75">        }</span>
<span class="code-block-extension-codeLine" data-line-num="76">    ], []);</span>
<span class="code-block-extension-codeLine" data-line-num="77"></span>
<span class="code-block-extension-codeLine" data-line-num="78">    <span class="hljs-keyword">const</span> searchMeetingRoom = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">values</span>: <span class="hljs-title class_">SearchMeetingRoom</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="79">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">searchMeetingRoomList</span>(values.<span class="hljs-property">name</span>, values.<span class="hljs-property">capacity</span>, values.<span class="hljs-property">equipment</span>, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="80"></span>
<span class="code-block-extension-codeLine" data-line-num="81">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="82">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="83">            <span class="hljs-title function_">setMeetingRoomResult</span>(data.<span class="hljs-property">meetingRooms</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: MeetingRoomSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="84">                <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="85">                    <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="86">                    ...item</span>
<span class="code-block-extension-codeLine" data-line-num="87">                }</span>
<span class="code-block-extension-codeLine" data-line-num="88">            }))</span>
<span class="code-block-extension-codeLine" data-line-num="89">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="90">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="91">        }</span>
<span class="code-block-extension-codeLine" data-line-num="92">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="93"></span>
<span class="code-block-extension-codeLine" data-line-num="94">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="95"></span>
<span class="code-block-extension-codeLine" data-line-num="96">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="97">        <span class="hljs-title function_">searchMeetingRoom</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="98">            <span class="hljs-attr">name</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'name'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="99">            <span class="hljs-attr">capacity</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'capacity'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="100">            <span class="hljs-attr">equipment</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'equipment'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="101">        });</span>
<span class="code-block-extension-codeLine" data-line-num="102">    }, [pageNo, pageSize]);</span>
<span class="code-block-extension-codeLine" data-line-num="103"></span>
<span class="code-block-extension-codeLine" data-line-num="104">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="105">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="106">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="107">    }, []);</span>
<span class="code-block-extension-codeLine" data-line-num="108"></span>
<span class="code-block-extension-codeLine" data-line-num="109">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"meetingRoomList-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="110">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"meetingRoomList-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="111">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="112">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="113">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchMeetingRoom}</span></span>
<span class="code-block-extension-codeLine" data-line-num="114">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="115">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="116">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="117">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="118">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="119">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="120">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="121"></span>
<span class="code-block-extension-codeLine" data-line-num="122">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"容纳人数"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"capacity"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="123">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="124">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="125"></span>
<span class="code-block-extension-codeLine" data-line-num="126">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"设备"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"equipment"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="127">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="128">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="129"></span>
<span class="code-block-extension-codeLine" data-line-num="130">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="131">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="132">                        搜索会议室</span>
<span class="code-block-extension-codeLine" data-line-num="133">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="134">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="135">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="136">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="137">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"meetingRoomList-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="138">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{meetingRoomResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="139">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="140">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="141">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="142">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="143">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="144">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="145">}</span>
</code></pre>
<p>上面是 form、下面是 table。</p>
<p>调用搜索接口来搜索列表数据，然后设置到 table 的 dataSource。</p>
<p>每次分页变化的时候重新搜索。</p>
<p>然后 css 部分如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#meetingRoomList-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-selector-id">#meetingRoomList-container</span> <span class="hljs-selector-class">.meetingRoomList-form</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">40px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>
<p>这样，列表页就完成了：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e03f191acba548c080c6df79d6ba12ad~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2282&amp;h=996&amp;s=369175&amp;e=gif&amp;f=28&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>其实写这个模块的时候偷懒了，应该是写完后端接口，还要写 swager 文档。</p>
<p>然后前端根据 swagger 接口文档才能知道传啥参数，有啥返回值。</p>
<p>当时我们没写 swagger 文档，现在补一下：</p>
<p>打开后端项目，在 MeetingRoomController 里加一下 swagger 相关的装饰器：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0a9c5aea2d54195a5782aca77447257~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=876&amp;h=488&amp;s=82012&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>首先加一下 delete 接口的：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">@<span class="hljs-title class_">ApiParam</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">name</span>: <span class="hljs-string">'id'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">description</span>: <span class="hljs-string">'id'</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">})</span>
<span class="code-block-extension-codeLine" data-line-num="6">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">description</span>: <span class="hljs-string">'success'</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">})</span>
</code></pre>
<p>访问 <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3005%2Fapi-doc%23%2Fdefault%2FMeetingRoomController_delete" target="_blank" rel="nofollow noopener noreferrer" title="http://localhost:3005/api-doc#/default/MeetingRoomController_delete" ref="nofollow noopener noreferrer">http://localhost:3005/api-doc</a> 可以看到这个接口的文档：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8b963c048bf443e960e6bf9a57ed815~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=730&amp;h=920&amp;s=57129&amp;e=png&amp;b=f9eeed" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>其实会议室的接口都是需要登录才能访问的，当时为了测试方便没有加，现在加一下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/120d7fdaeeda4067af9c813137c518f2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=772&amp;h=600&amp;s=83483&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>添加 @RequireLogin 装饰器，标识接口需要登录。</p>
<p>并且添加对应的 @ApiBearerAuth 的 swagger 装饰器，代表需要添加 Bearer 的 header。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2e9f334c1dc4d49b597ae390b8ed7d8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1768&amp;h=808&amp;s=210740&amp;e=gif&amp;f=28&amp;b=fbf0ed" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>我们现在 postman 里测试下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2647600e3294667988d07e60f10a32d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1008&amp;h=710&amp;s=73376&amp;e=png&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这时候直接调用 delete 接口就会提示需要先登录了。</p>
<p>然后我们登录下，拿到 token。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1878903a2706490ab7549b401dac94b8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1280&amp;h=964&amp;s=192034&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>把它复制到 swagger 文档这里：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e84ac199636344dda2096a6781adea5b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1880&amp;h=708&amp;s=98312&amp;e=png&amp;b=312f2e" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后点击这个 try it out：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c710fcb942834328ad86aefbe95abdcf~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1966&amp;h=630&amp;s=58947&amp;e=png&amp;b=f9eeec" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>数据库中现在有 3 条记录：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94cfeff6d31b4265abb2a106531b8591~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=994&amp;h=262&amp;s=85140&amp;e=png&amp;b=f9f9f9" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>把 id 为 10 那条删掉。</p>
<p>点击 execute：
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72aeb9819eb54d2987759687846b06c3~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1584&amp;h=730&amp;s=60955&amp;e=png&amp;b=f9eeed" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>swagger 会发送请求，下面会打印响应：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4b1c8cba1fb48bdb045d18c14ca6aa3~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1548&amp;h=1018&amp;s=172362&amp;e=png&amp;b=333333" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这时数据库里就没有这条记录了：
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fd6d061c25244e6b180dfd939c05adf~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=772&amp;h=282&amp;s=71192&amp;e=png&amp;b=f7f7f7" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>可以直接在 swagger 文档里测试接口，不用 postman 也行。</p>
<p>然后继续写下个接口的 swagger 文档：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20d1107d67f743139c2c218b7a90194d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=820&amp;h=156&amp;s=31995&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这个接口的参数也是用 @ApiParam 标识，但它的响应不是 string，而是 MeetingRoom。</p>
<p>而我们现在并没有 vo，没地方标识属性：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b87f13f1aafb4e5a8af14f89143f37bc~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=634&amp;h=200&amp;s=25174&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>所以要创建个 vo：</p>
<p>新建 src/meeting-room/vo/meeting-room.vo.ts</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApiProperty</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@nestjs/swagger"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MeetingRoomVo</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    </span>
<span class="code-block-extension-codeLine" data-line-num="5">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">name</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">capacity</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">location</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">equipment</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">description</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="22"></span>
<span class="code-block-extension-codeLine" data-line-num="23">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">isBooked</span>: boolean;</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">createTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="28"></span>
<span class="code-block-extension-codeLine" data-line-num="29">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-attr">updateTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="31">}</span>
</code></pre>
<p>然后加一下 swagger 的装饰器：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/403bf1d50ff2435cb173313a7e33db2a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=884&amp;h=526&amp;s=86522&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">@<span class="hljs-title class_">ApiBearerAuth</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="2">@<span class="hljs-title class_">ApiParam</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">name</span>: <span class="hljs-string">'id'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="5">})</span>
<span class="code-block-extension-codeLine" data-line-num="6">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">description</span>: <span class="hljs-string">'success'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">MeetingRoomVo</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">})</span>
</code></pre>
<p>试一下：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37136786e63d4977b0de06c030d9a91a~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1200&amp;h=1430&amp;s=159801&amp;e=png&amp;b=eef4fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>接下来是 update 接口：</p>
<p>他有两种响应：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be0633b63e4f4b81971024b773fdb6b2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=896&amp;h=900&amp;s=169239&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>分别写一下：
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ef54451d60544fd7b16a6cf32db46bd1~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=954&amp;h=608&amp;s=111879&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">@<span class="hljs-title class_">ApiBearerAuth</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="2">@<span class="hljs-title class_">ApiBody</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">UpdateMeetingRoomDto</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">})</span>
<span class="code-block-extension-codeLine" data-line-num="5">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">BAD_REQUEST</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">description</span>: <span class="hljs-string">'会议室不存在'</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">})</span>
<span class="code-block-extension-codeLine" data-line-num="9">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">description</span>: <span class="hljs-string">'success'</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">})</span>
</code></pre>
<p>然后在 dto 里标注下属性：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0912339cf2d4a3a84550b6e1f64483e~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1224&amp;h=468&amp;s=109922&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>因为 update 的 dto 继承了 create 的 dto，所以那里也要加一下：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e565e7676c00472b842aeb9ce9b36623~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=996&amp;h=1268&amp;s=205871&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样 swagger 文档就对了：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c2adc8415da42868092c8ee1b4fed81~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=952&amp;h=1296&amp;s=110208&amp;e=png&amp;b=faf4ee" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后是 create 接口：</p>
<p>postman 里调用下是这样的：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5339becd99cd4d6ebe127cef968e1c8c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=916&amp;h=1128&amp;s=146290&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df30ee02c0cb46509d4adcee93299775~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=858&amp;h=878&amp;s=96535&amp;e=png&amp;b=fcfcfc" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>所以 swagger 装饰器这样写：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7cd2bb760ccd4d0f8ada447247032729~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=978&amp;h=620&amp;s=113340&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">@<span class="hljs-title class_">ApiBearerAuth</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="2">@<span class="hljs-title class_">ApiBody</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">CreateMeetingRoomDto</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">})</span>
<span class="code-block-extension-codeLine" data-line-num="5">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">BAD_REQUEST</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-attr">description</span>: <span class="hljs-string">'会议室名字已存在'</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">})</span>
<span class="code-block-extension-codeLine" data-line-num="9">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">status</span>: <span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">OK</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">MeetingRoomVo</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">})</span>
</code></pre>
<p>这样 swagger 文档显示的就对了：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22530084774640bc95d5bddce063347b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=968&amp;h=1484&amp;s=169359&amp;e=png&amp;b=eff7f3" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后还有最后一个 list 接口：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/786fa3b2fb2c4245a782810e3c853f2f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1342&amp;h=410&amp;s=117414&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>它的响应是这样的：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e5d0a05f5ba42c5bcb165a5284042bd~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1196&amp;h=1280&amp;s=152984&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>首先创建响应数据的 vo：</p>
<p>src/meeting-room/vo/meeting-room-list.vo.ts</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApiProperty</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@nestjs/swagger"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomVo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./meeting-room.vo"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MeetingRoomListVo</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">    @<span class="hljs-title class_">ApiProperty</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-attr">type</span>: [<span class="hljs-title class_">MeetingRoomVo</span>]</span>
<span class="code-block-extension-codeLine" data-line-num="8">    })</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">users</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">MeetingRoomVo</span>&gt;;</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">    @<span class="hljs-title class_">ApiProperty</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">totalCount</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>
<p>然后加一下 swagger 的装饰器：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/675a8cca8ac94b0089e77dbc4cab6cd2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1170&amp;h=1174&amp;s=171865&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">@<span class="hljs-title class_">ApiBearerAuth</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="2">@<span class="hljs-title class_">ApiQuery</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">name</span>: <span class="hljs-string">'pageNo'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">})</span>
<span class="code-block-extension-codeLine" data-line-num="7">@<span class="hljs-title class_">ApiQuery</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attr">name</span>: <span class="hljs-string">'pageSize'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">})</span>
<span class="code-block-extension-codeLine" data-line-num="12">@<span class="hljs-title class_">ApiQuery</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">name</span>: <span class="hljs-string">'name'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span></span>
<span class="code-block-extension-codeLine" data-line-num="16">})</span>
<span class="code-block-extension-codeLine" data-line-num="17">@<span class="hljs-title class_">ApiQuery</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">name</span>: <span class="hljs-string">'capacity'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="20">    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span></span>
<span class="code-block-extension-codeLine" data-line-num="21">})</span>
<span class="code-block-extension-codeLine" data-line-num="22">@<span class="hljs-title class_">ApiQuery</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">name</span>: <span class="hljs-string">'equipment'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span></span>
<span class="code-block-extension-codeLine" data-line-num="26">})</span>
<span class="code-block-extension-codeLine" data-line-num="27">@<span class="hljs-title class_">ApiResponse</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">type</span>: <span class="hljs-title class_">MeetingRoomListVo</span></span>
<span class="code-block-extension-codeLine" data-line-num="29">})</span>
</code></pre>
<p>有同学说，不用把 service 里的返回值改成 MeetingRoomListVo 对象么？</p>
<p>不用，只要结构对上就行。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/00ce922e32a7473096d86a179df7bdbc~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=938&amp;h=934&amp;s=81975&amp;e=png&amp;b=eef4fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1707ae9b1ad9415e8f62f5eaa10670c2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=834&amp;h=882&amp;s=103636&amp;e=png&amp;b=eef4fa" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>最后，在 controller 上加上个 @ApiTags，把下面的接口分到单独一组：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8ffeb13d85243c0b69015d3a0241ed0~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=626&amp;h=170&amp;s=41061&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31ce4c320acc4e4f86df0cc125983104~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=780&amp;h=608&amp;s=59113&amp;e=png&amp;b=f8f4f4" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，用户端的会议室列表页面，swagger 文档就都完成了。</p>
<p>案例代码上传了小册仓库：</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_frontend_user" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_frontend_user" ref="nofollow noopener noreferrer">前端代码</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_backend" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_backend" ref="nofollow noopener noreferrer">后端代码</a></p>
<h2 data-id="heading-0">总结</h2>
<p>这节我们写了用户端的会议室列表页，并且补了 swagger 文档。</p>
<p>用户端列表页就是调用 list 接口，通过 form 来填写参数，通过 table 展示结果。</p>
<p>swagger 文档部分就是分别通过 @ApiPram @ApiQuery @ApiBody @ApiResponse 标识接口，通过 @ApiProperty 标识 dto 和 vo 的属性。</p>
<p>这样，会议室模块的前端后端就都完成了。</p></div>