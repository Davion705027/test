<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>这节写下预定管理模块管理端的前端部分：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/036dff2b321c429e8b584ce61ce7916f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1628&amp;h=1126&amp;s=174963&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>对应的路由我们前面写过了：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0ab57c76c05496e89dd88b85b3bc0a7~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1028&amp;h=636&amp;s=64854&amp;e=png&amp;b=ffffff" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这节来填充下内容。</p>
<p>首先是 table 部分：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Badge</span>, <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Popconfirm</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../UserManage/UserManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../MeetingRoomManage/MeetingRoomManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">user</span>: <span class="hljs-title class_">UserSearchResult</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-keyword">const</span> [bookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="26">        {</span>
<span class="code-block-extension-codeLine" data-line-num="27">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="28">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="29">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="30">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">name</span></span>
<span class="code-block-extension-codeLine" data-line-num="31">            }</span>
<span class="code-block-extension-codeLine" data-line-num="32">        },</span>
<span class="code-block-extension-codeLine" data-line-num="33">        {</span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室位置'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="35">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="36">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="37">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">location</span></span>
<span class="code-block-extension-codeLine" data-line-num="38">            }</span>
<span class="code-block-extension-codeLine" data-line-num="39">        },</span>
<span class="code-block-extension-codeLine" data-line-num="40">        {</span>
<span class="code-block-extension-codeLine" data-line-num="41">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定人'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'user'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="43">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="44">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">user</span>.<span class="hljs-property">username</span></span>
<span class="code-block-extension-codeLine" data-line-num="45">            }</span>
<span class="code-block-extension-codeLine" data-line-num="46">        },</span>
<span class="code-block-extension-codeLine" data-line-num="47">        {</span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-attr">title</span>: <span class="hljs-string">'开始时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'startTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="50">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="51">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">startTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="52">            }</span>
<span class="code-block-extension-codeLine" data-line-num="53">        },</span>
<span class="code-block-extension-codeLine" data-line-num="54">        {</span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-attr">title</span>: <span class="hljs-string">'结束时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'endTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="57">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">endTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="59">            }</span>
<span class="code-block-extension-codeLine" data-line-num="60">        },</span>
<span class="code-block-extension-codeLine" data-line-num="61">        {</span>
<span class="code-block-extension-codeLine" data-line-num="62">            <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span></span>
<span class="code-block-extension-codeLine" data-line-num="64">        },</span>
<span class="code-block-extension-codeLine" data-line-num="65">        {</span>
<span class="code-block-extension-codeLine" data-line-num="66">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="67">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="68">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="69">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">createTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD hh:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="70">            }</span>
<span class="code-block-extension-codeLine" data-line-num="71">        },</span>
<span class="code-block-extension-codeLine" data-line-num="72">        {</span>
<span class="code-block-extension-codeLine" data-line-num="73">            <span class="hljs-attr">title</span>: <span class="hljs-string">'备注'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="74">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'note'</span></span>
<span class="code-block-extension-codeLine" data-line-num="75">        },</span>
<span class="code-block-extension-codeLine" data-line-num="76">        {</span>
<span class="code-block-extension-codeLine" data-line-num="77">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="78">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="79">        },</span>
<span class="code-block-extension-codeLine" data-line-num="80">        {</span>
<span class="code-block-extension-codeLine" data-line-num="81">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="82">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="83">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="84">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="85">            )</span>
<span class="code-block-extension-codeLine" data-line-num="86">        }</span>
<span class="code-block-extension-codeLine" data-line-num="87">    ];</span>
<span class="code-block-extension-codeLine" data-line-num="88"></span>
<span class="code-block-extension-codeLine" data-line-num="89"></span>
<span class="code-block-extension-codeLine" data-line-num="90">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="91">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="92">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="93">    }</span>
<span class="code-block-extension-codeLine" data-line-num="94"></span>
<span class="code-block-extension-codeLine" data-line-num="95">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="96">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="97">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{bookingSearchResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="99">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="100">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="101">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="102">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="103">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="104">}</span>
</code></pre>
<p>列表接口是这样的：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fdc24e7926c4ff3831cb18819c6b171~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2046&amp;h=686&amp;s=100916&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>根据这个指定表格列的定义，并且添加分页的处理。</p>
<p>其中涉及到的 User 和 Room 的类型从其他页面导入：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eac4968dc0a34abc95e01c4690118a72~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=860&amp;h=526&amp;s=91934&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0e005d4ccd5420bb158a3f3d32c914d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=752&amp;h=584&amp;s=78976&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2db8c1caa203456b97dadea90667da71~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=960&amp;h=606&amp;s=100385&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这里用到 dayjs 来格式化日期，安装下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang"></span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install dayjs</span>
</code></pre>
<p>然后加上上面的表单：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Popconfirm</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> <span class="hljs-string">'./booking_manage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../UserManage/UserManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../MeetingRoomManage/MeetingRoomManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">SearchBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">meetingRoomName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">meetingRoomPosition</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="21">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">user</span>: <span class="hljs-title class_">UserSearchResult</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="29">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="30">}</span>
<span class="code-block-extension-codeLine" data-line-num="31"></span>
<span class="code-block-extension-codeLine" data-line-num="32"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="33">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="35">    <span class="hljs-keyword">const</span> [bookingSearchResult, setBookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="36">    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="37"></span>
<span class="code-block-extension-codeLine" data-line-num="38">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="39">        {</span>
<span class="code-block-extension-codeLine" data-line-num="40">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="41">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="43">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">name</span></span>
<span class="code-block-extension-codeLine" data-line-num="44">            }</span>
<span class="code-block-extension-codeLine" data-line-num="45">        },</span>
<span class="code-block-extension-codeLine" data-line-num="46">        {</span>
<span class="code-block-extension-codeLine" data-line-num="47">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室位置'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="50">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">location</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">            }</span>
<span class="code-block-extension-codeLine" data-line-num="52">        },</span>
<span class="code-block-extension-codeLine" data-line-num="53">        {</span>
<span class="code-block-extension-codeLine" data-line-num="54">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定人'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'user'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="57">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">user</span>.<span class="hljs-property">username</span></span>
<span class="code-block-extension-codeLine" data-line-num="58">            }</span>
<span class="code-block-extension-codeLine" data-line-num="59">        },</span>
<span class="code-block-extension-codeLine" data-line-num="60">        {</span>
<span class="code-block-extension-codeLine" data-line-num="61">            <span class="hljs-attr">title</span>: <span class="hljs-string">'开始时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="62">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'startTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="64">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">startTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="65">            }</span>
<span class="code-block-extension-codeLine" data-line-num="66">        },</span>
<span class="code-block-extension-codeLine" data-line-num="67">        {</span>
<span class="code-block-extension-codeLine" data-line-num="68">            <span class="hljs-attr">title</span>: <span class="hljs-string">'结束时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="69">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'endTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="71">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">endTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="72">            }</span>
<span class="code-block-extension-codeLine" data-line-num="73">        },</span>
<span class="code-block-extension-codeLine" data-line-num="74">        {</span>
<span class="code-block-extension-codeLine" data-line-num="75">            <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="76">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span></span>
<span class="code-block-extension-codeLine" data-line-num="77">        },</span>
<span class="code-block-extension-codeLine" data-line-num="78">        {</span>
<span class="code-block-extension-codeLine" data-line-num="79">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="80">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="81">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="82">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">createTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD hh:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="83">            }</span>
<span class="code-block-extension-codeLine" data-line-num="84">        },</span>
<span class="code-block-extension-codeLine" data-line-num="85">        {</span>
<span class="code-block-extension-codeLine" data-line-num="86">            <span class="hljs-attr">title</span>: <span class="hljs-string">'备注'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="87">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'note'</span></span>
<span class="code-block-extension-codeLine" data-line-num="88">        },</span>
<span class="code-block-extension-codeLine" data-line-num="89">        {</span>
<span class="code-block-extension-codeLine" data-line-num="90">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="91">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="92">        },</span>
<span class="code-block-extension-codeLine" data-line-num="93">        {</span>
<span class="code-block-extension-codeLine" data-line-num="94">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="95">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="96">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="97">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">            )</span>
<span class="code-block-extension-codeLine" data-line-num="99">        }</span>
<span class="code-block-extension-codeLine" data-line-num="100">    ];</span>
<span class="code-block-extension-codeLine" data-line-num="101"></span>
<span class="code-block-extension-codeLine" data-line-num="102">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="103"></span>
<span class="code-block-extension-codeLine" data-line-num="104">    }</span>
<span class="code-block-extension-codeLine" data-line-num="105"></span>
<span class="code-block-extension-codeLine" data-line-num="106">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="107"></span>
<span class="code-block-extension-codeLine" data-line-num="108">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="109">        <span class="hljs-title function_">searchBooking</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="110">            <span class="hljs-attr">username</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'username'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="111">            <span class="hljs-attr">meetingRoomName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomName'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="112">            <span class="hljs-attr">meetingRoomPosition</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomPosition'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="113">            <span class="hljs-attr">rangeStartDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="114">            <span class="hljs-attr">rangeStartTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartTime'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="115">            <span class="hljs-attr">rangeEndDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="116">            <span class="hljs-attr">rangeEndTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndTime'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="117">        });</span>
<span class="code-block-extension-codeLine" data-line-num="118">    }, [pageNo, pageSize, num]);</span>
<span class="code-block-extension-codeLine" data-line-num="119"></span>
<span class="code-block-extension-codeLine" data-line-num="120">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="121">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="122">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="123">    }</span>
<span class="code-block-extension-codeLine" data-line-num="124"></span>
<span class="code-block-extension-codeLine" data-line-num="125">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="126">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="127">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="128">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="129">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchBooking}</span></span>
<span class="code-block-extension-codeLine" data-line-num="130">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="131">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="132">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="133">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="134">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定人"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="135">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="136">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="137"></span>
<span class="code-block-extension-codeLine" data-line-num="138">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="139">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="140">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="141"></span>
<span class="code-block-extension-codeLine" data-line-num="142">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="143">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="144">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="145"></span>
<span class="code-block-extension-codeLine" data-line-num="146">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="147">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="148">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="149"></span>
<span class="code-block-extension-codeLine" data-line-num="150">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="151">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="152">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="153"></span>
<span class="code-block-extension-codeLine" data-line-num="154">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="155">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="156">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="157"></span>
<span class="code-block-extension-codeLine" data-line-num="158">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomPosition"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="159">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="160">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="161"></span>
<span class="code-block-extension-codeLine" data-line-num="162">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="163">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="164">                        搜索预定申请</span>
<span class="code-block-extension-codeLine" data-line-num="165">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="166">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="167">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="168">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="169">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="170">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{bookingSearchResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="171">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="172">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="173">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="174">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="175">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="176">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="177">}</span>
</code></pre>
<p>涉及到的 css 如下：</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">css</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-selector-id">#bookingManage-container</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-selector-id">#bookingManage-container</span> <span class="hljs-selector-class">.bookingManage-form</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">40px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-selector-id">#bookingManage-container</span> <span class="hljs-selector-class">.ant-form-item</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
</code></pre>
<p>渲染出来是这样的：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7975fd6c491e495a906a8d5c111ab25d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2450&amp;h=1108&amp;s=174544&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这里要注意的是日期和时间分别要用 DatePicker 和 TimePicker，所以分为 2 个字段。</p>
<p>接下来实现下用到的接口，改下 interfaces.ts</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bookingList</span>(<span class="hljs-params">searchBooking: SearchBooking, pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-keyword">let</span> bookingTimeRangeStart;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-keyword">let</span> bookingTimeRangeEnd;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    </span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="hljs-keyword">if</span>(searchBooking.<span class="hljs-property">rangeStartDate</span> &amp;&amp; searchBooking.<span class="hljs-property">rangeStartTime</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="7">        <span class="hljs-keyword">const</span> rangeStartDateStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeStartDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-keyword">const</span> rangeStartTimeStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeStartTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="9">        bookingTimeRangeStart = <span class="hljs-title function_">dayjs</span>(rangeStartDateStr + <span class="hljs-string">' '</span> + rangeStartTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="10">    }</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-keyword">if</span>(searchBooking.<span class="hljs-property">rangeEndDate</span> &amp;&amp; searchBooking.<span class="hljs-property">rangeEndTime</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        <span class="hljs-keyword">const</span> rangeEndDateStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeEndDate</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">        <span class="hljs-keyword">const</span> rangeEndTimeStr = <span class="hljs-title function_">dayjs</span>(searchBooking.<span class="hljs-property">rangeEndTime</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'HH:mm'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="15">        bookingTimeRangeEnd = <span class="hljs-title function_">dayjs</span>(rangeEndDateStr + <span class="hljs-string">' '</span> + rangeEndTimeStr).<span class="hljs-title function_">valueOf</span>()</span>
<span class="code-block-extension-codeLine" data-line-num="16">    }</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/list'</span>, {</span>
<span class="code-block-extension-codeLine" data-line-num="19">        <span class="hljs-attr">params</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="20">            <span class="hljs-attr">username</span>: searchBooking.<span class="hljs-property">username</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="21">            <span class="hljs-attr">meetingRoomName</span>: searchBooking.<span class="hljs-property">meetingRoomName</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="22">            <span class="hljs-attr">meetingRoomPosition</span>: searchBooking.<span class="hljs-property">meetingRoomPosition</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="23">            bookingTimeRangeStart,</span>
<span class="code-block-extension-codeLine" data-line-num="24">            bookingTimeRangeEnd,</span>
<span class="code-block-extension-codeLine" data-line-num="25">            <span class="hljs-attr">pageNo</span>: pageNo,</span>
<span class="code-block-extension-codeLine" data-line-num="26">            <span class="hljs-attr">pageSize</span>: pageSize</span>
<span class="code-block-extension-codeLine" data-line-num="27">        }</span>
<span class="code-block-extension-codeLine" data-line-num="28">    });</span>
<span class="code-block-extension-codeLine" data-line-num="29">}</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apply</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/apply/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="33">}</span>
<span class="code-block-extension-codeLine" data-line-num="34"></span>
<span class="code-block-extension-codeLine" data-line-num="35"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="36">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/reject/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="37">}</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unbind</span>(<span class="hljs-params">id: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="40">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/booking/unbind/'</span> + id);</span>
<span class="code-block-extension-codeLine" data-line-num="41">}</span>
</code></pre>
<p>apply、reject、unbind 接口比较简单，列表接口相对麻烦一些。</p>
<p>因为现在日期和时间分为了 2 个字段，而接口只接收一个字段，所以要把它们合并。</p>
<p>用 dayjs 分别把日期和时间 format 成 YYYY-MM-DD 和 HH:mm 的格式。</p>
<p>然后拼接成一个字符串之后，再创建 dayjs 实例，这样时间就合并成一个了。</p>
<p>在页面里调用下列表接口：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2905a09abab4077bfbb60e5245dec7d~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1348&amp;h=604&amp;s=113612&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">DatePicker</span>, <span class="hljs-title class_">Form</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Popconfirm</span>, <span class="hljs-title class_">Table</span>, <span class="hljs-title class_">TimePicker</span>, message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColumnsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/table"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd/es/form/Form"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="hljs-keyword">import</span> { apply, bookingList, reject, unbind } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../interfaces/interfaces"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="hljs-keyword">import</span> <span class="hljs-string">'./booking_manage.css'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../UserManage/UserManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeetingRoomSearchResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../MeetingRoomManage/MeetingRoomManage"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="9"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">SearchBooking</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="12">    <span class="hljs-attr">username</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    <span class="hljs-attr">meetingRoomName</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    <span class="hljs-attr">meetingRoomPosition</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    <span class="hljs-attr">rangeStartDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-attr">rangeStartTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    <span class="hljs-attr">rangeEndDate</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    <span class="hljs-attr">rangeEndTime</span>: <span class="hljs-title class_">Date</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="19">}</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">interface <span class="hljs-title class_">BookingSearchResult</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="22">    <span class="hljs-attr">id</span>: number;</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-attr">startTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="24">    <span class="hljs-attr">endTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="25">    <span class="hljs-attr">status</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="hljs-attr">note</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">createTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">updateTime</span>: string;</span>
<span class="code-block-extension-codeLine" data-line-num="29">    <span class="hljs-attr">user</span>: <span class="hljs-title class_">UserSearchResult</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-attr">room</span>: <span class="hljs-title class_">MeetingRoomSearchResult</span></span>
<span class="code-block-extension-codeLine" data-line-num="31">}</span>
<span class="code-block-extension-codeLine" data-line-num="32"></span>
<span class="code-block-extension-codeLine" data-line-num="33"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BookingManage</span>(<span class="hljs-params"></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="34">    <span class="hljs-keyword">const</span> [pageNo, setPageNo] = useState&lt;number&gt;(<span class="hljs-number">1</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="35">    <span class="hljs-keyword">const</span> [pageSize, setPageSize] = useState&lt;number&gt;(<span class="hljs-number">10</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="36">    <span class="hljs-keyword">const</span> [bookingSearchResult, setBookingSearchResult] = useState&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt;&gt;([]);</span>
<span class="code-block-extension-codeLine" data-line-num="37">    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39">    <span class="hljs-keyword">const</span> <span class="hljs-attr">columns</span>: <span class="hljs-title class_">ColumnsType</span>&lt;<span class="hljs-title class_">BookingSearchResult</span>&gt; = [</span>
<span class="code-block-extension-codeLine" data-line-num="40">        {</span>
<span class="code-block-extension-codeLine" data-line-num="41">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室名称'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="42">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="43">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="44">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">name</span></span>
<span class="code-block-extension-codeLine" data-line-num="45">            }</span>
<span class="code-block-extension-codeLine" data-line-num="46">        },</span>
<span class="code-block-extension-codeLine" data-line-num="47">        {</span>
<span class="code-block-extension-codeLine" data-line-num="48">            <span class="hljs-attr">title</span>: <span class="hljs-string">'会议室位置'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="49">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'room'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="50">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="51">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">room</span>.<span class="hljs-property">location</span></span>
<span class="code-block-extension-codeLine" data-line-num="52">            }</span>
<span class="code-block-extension-codeLine" data-line-num="53">        },</span>
<span class="code-block-extension-codeLine" data-line-num="54">        {</span>
<span class="code-block-extension-codeLine" data-line-num="55">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定人'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="56">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'user'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="57">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="58">                <span class="hljs-keyword">return</span> record.<span class="hljs-property">user</span>.<span class="hljs-property">username</span></span>
<span class="code-block-extension-codeLine" data-line-num="59">            }</span>
<span class="code-block-extension-codeLine" data-line-num="60">        },</span>
<span class="code-block-extension-codeLine" data-line-num="61">        {</span>
<span class="code-block-extension-codeLine" data-line-num="62">            <span class="hljs-attr">title</span>: <span class="hljs-string">'开始时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'startTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="64">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="65">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">startTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="66">            }</span>
<span class="code-block-extension-codeLine" data-line-num="67">        },</span>
<span class="code-block-extension-codeLine" data-line-num="68">        {</span>
<span class="code-block-extension-codeLine" data-line-num="69">            <span class="hljs-attr">title</span>: <span class="hljs-string">'结束时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="70">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'endTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="71">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="72">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">endTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="73">            }</span>
<span class="code-block-extension-codeLine" data-line-num="74">        },</span>
<span class="code-block-extension-codeLine" data-line-num="75">        {</span>
<span class="code-block-extension-codeLine" data-line-num="76">            <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="77">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="78">        },</span>
<span class="code-block-extension-codeLine" data-line-num="79">        {</span>
<span class="code-block-extension-codeLine" data-line-num="80">            <span class="hljs-attr">title</span>: <span class="hljs-string">'预定时间'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="81">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'createTime'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="82">            <span class="hljs-title function_">render</span>(<span class="hljs-params">_, record</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="83">                <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(record.<span class="hljs-property">createTime</span>)).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD hh:mm:ss'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="84">            }</span>
<span class="code-block-extension-codeLine" data-line-num="85">        },</span>
<span class="code-block-extension-codeLine" data-line-num="86">        {</span>
<span class="code-block-extension-codeLine" data-line-num="87">            <span class="hljs-attr">title</span>: <span class="hljs-string">'备注'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="88">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'note'</span></span>
<span class="code-block-extension-codeLine" data-line-num="89">        },</span>
<span class="code-block-extension-codeLine" data-line-num="90">        {</span>
<span class="code-block-extension-codeLine" data-line-num="91">            <span class="hljs-attr">title</span>: <span class="hljs-string">'描述'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="92">            <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'description'</span></span>
<span class="code-block-extension-codeLine" data-line-num="93">        },</span>
<span class="code-block-extension-codeLine" data-line-num="94">        {</span>
<span class="code-block-extension-codeLine" data-line-num="95">            <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="96">            <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="97">                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="98">                    </span>
<span class="code-block-extension-codeLine" data-line-num="99">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="100">            )</span>
<span class="code-block-extension-codeLine" data-line-num="101">        }</span>
<span class="code-block-extension-codeLine" data-line-num="102">    ];</span>
<span class="code-block-extension-codeLine" data-line-num="103"></span>
<span class="code-block-extension-codeLine" data-line-num="104">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">searchBooking</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">values: SearchBooking</span>) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="105">        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">bookingList</span>(values, pageNo, pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="106"></span>
<span class="code-block-extension-codeLine" data-line-num="107">        <span class="hljs-keyword">const</span> { data } = res.<span class="hljs-property">data</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="108">        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="109">            <span class="hljs-title function_">setBookingSearchResult</span>(data.<span class="hljs-property">bookings</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: BookingSearchResult</span>) =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="110">                <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="111">                    <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="112">                    ...item</span>
<span class="code-block-extension-codeLine" data-line-num="113">                }</span>
<span class="code-block-extension-codeLine" data-line-num="114">            }))</span>
<span class="code-block-extension-codeLine" data-line-num="115">        } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="116">            message.<span class="hljs-title function_">error</span>(data || <span class="hljs-string">'系统繁忙，请稍后再试'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="117">        }</span>
<span class="code-block-extension-codeLine" data-line-num="118">    }</span>
<span class="code-block-extension-codeLine" data-line-num="119"></span>
<span class="code-block-extension-codeLine" data-line-num="120">    <span class="hljs-keyword">const</span> [form ]  = <span class="hljs-title function_">useForm</span>();</span>
<span class="code-block-extension-codeLine" data-line-num="121"></span>
<span class="code-block-extension-codeLine" data-line-num="122">    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="123">        <span class="hljs-title function_">searchBooking</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="124">            <span class="hljs-attr">username</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'username'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="125">            <span class="hljs-attr">meetingRoomName</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomName'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="126">            <span class="hljs-attr">meetingRoomPosition</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'meetingRoomPosition'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="127">            <span class="hljs-attr">rangeStartDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="128">            <span class="hljs-attr">rangeStartTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeStartTime'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="129">            <span class="hljs-attr">rangeEndDate</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndDate'</span>),</span>
<span class="code-block-extension-codeLine" data-line-num="130">            <span class="hljs-attr">rangeEndTime</span>: form.<span class="hljs-title function_">getFieldValue</span>(<span class="hljs-string">'rangeEndTime'</span>)</span>
<span class="code-block-extension-codeLine" data-line-num="131">        });</span>
<span class="code-block-extension-codeLine" data-line-num="132">    }, [pageNo, pageSize, num]);</span>
<span class="code-block-extension-codeLine" data-line-num="133"></span>
<span class="code-block-extension-codeLine" data-line-num="134">    <span class="hljs-keyword">const</span> changePage = <span class="hljs-keyword">function</span>(<span class="hljs-params">pageNo: number, pageSize: number</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="135">        <span class="hljs-title function_">setPageNo</span>(pageNo);</span>
<span class="code-block-extension-codeLine" data-line-num="136">        <span class="hljs-title function_">setPageSize</span>(pageSize);</span>
<span class="code-block-extension-codeLine" data-line-num="137">    }</span>
<span class="code-block-extension-codeLine" data-line-num="138"></span>
<span class="code-block-extension-codeLine" data-line-num="139">    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bookingManage-container"</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="140">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingManage-form"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="141">            <span class="hljs-tag">&lt;<span class="hljs-name">Form</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="142">                <span class="hljs-attr">form</span>=<span class="hljs-string">{form}</span></span>
<span class="code-block-extension-codeLine" data-line-num="143">                <span class="hljs-attr">onFinish</span>=<span class="hljs-string">{searchBooking}</span></span>
<span class="code-block-extension-codeLine" data-line-num="144">                <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span></span>
<span class="code-block-extension-codeLine" data-line-num="145">                <span class="hljs-attr">layout</span>=<span class="hljs-string">'inline'</span></span>
<span class="code-block-extension-codeLine" data-line-num="146">                <span class="hljs-attr">colon</span>=<span class="hljs-string">{false}</span></span>
<span class="code-block-extension-codeLine" data-line-num="147">            &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="148">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定人"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="149">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="150">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="151"></span>
<span class="code-block-extension-codeLine" data-line-num="152">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"会议室名称"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomName"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="153">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="154">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="155"></span>
<span class="code-block-extension-codeLine" data-line-num="156">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="157">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="158">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="159"></span>
<span class="code-block-extension-codeLine" data-line-num="160">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定开始时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeStartTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="161">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="162">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="163"></span>
<span class="code-block-extension-codeLine" data-line-num="164">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束日期"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndDate"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="165">                    <span class="hljs-tag">&lt;<span class="hljs-name">DatePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="166">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="167"></span>
<span class="code-block-extension-codeLine" data-line-num="168">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"预定结束时间"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rangeEndTime"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="169">                    <span class="hljs-tag">&lt;<span class="hljs-name">TimePicker</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="170">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="171"></span>
<span class="code-block-extension-codeLine" data-line-num="172">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"位置"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"meetingRoomPosition"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="173">                    <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="174">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="175"></span>
<span class="code-block-extension-codeLine" data-line-num="176">                <span class="hljs-tag">&lt;<span class="hljs-name">Form.Item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="177">                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">htmlType</span>=<span class="hljs-string">"submit"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="178">                        搜索预定申请</span>
<span class="code-block-extension-codeLine" data-line-num="179">                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="180">                <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Item</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="181">            <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="182">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="183">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bookingManage-table"</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="184">            <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{bookingSearchResult}</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">{</span> {</span></span>
<span class="code-block-extension-codeLine" data-line-num="185">                <span class="hljs-attr">current:</span> <span class="hljs-attr">pageNo</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="186">                <span class="hljs-attr">pageSize:</span> <span class="hljs-attr">pageSize</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="187">                <span class="hljs-attr">onChange:</span> <span class="hljs-attr">changePage</span></span>
<span class="code-block-extension-codeLine" data-line-num="188">            }}/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="189">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="190">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="191">}</span>
</code></pre>
<p>没带参数的搜索没问题：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f93d610987f44426a704609874d8e6e2~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2466&amp;h=1184&amp;s=242353&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>数据库里就这 4 条记录：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99eac5103d52465f863a3ea7afa254ed~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1792&amp;h=482&amp;s=238462&amp;e=png&amp;b=f2f0ef" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后带上参数搜索下：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa7262447f994b508aba2b98e351113c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2428&amp;h=878&amp;s=175924&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38bd171dc44a49b1b07b704d41279a93~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2318&amp;h=944&amp;s=192886&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c0b454303ec4c259616681a49ffd4b8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2120&amp;h=868&amp;s=157744&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>开始时间在 2023-9-29 的 10 点到 11 点的预定有 3 条：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c2efb545f44a8a9ed43dd76d79b3da~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2348&amp;h=994&amp;s=187375&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>11 点到 12 点的有 1 条：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c1408c333154bea89e476ca494f087f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2364&amp;h=836&amp;s=170075&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，列表功能就完成了。</p>
<p>可以再加上个按照状态过滤，这个是 antd 的功能：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fafb59aae484465c9758a75d19f282f8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1358&amp;h=906&amp;s=140771&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'审批状态'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'status'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="hljs-attr">onFilter</span>: <span class="hljs-function">(<span class="hljs-params">value, record</span>) =&gt;</span> record.<span class="hljs-property">status</span>.<span class="hljs-title function_">startsWith</span>(value <span class="hljs-keyword">as</span> string),</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="hljs-attr">filters</span>: [</span>
<span class="code-block-extension-codeLine" data-line-num="6">        {</span>
<span class="code-block-extension-codeLine" data-line-num="7">          <span class="hljs-attr">text</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="8">          <span class="hljs-attr">value</span>: <span class="hljs-string">'审批通过'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">        },</span>
<span class="code-block-extension-codeLine" data-line-num="10">        {</span>
<span class="code-block-extension-codeLine" data-line-num="11">          <span class="hljs-attr">text</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="12">          <span class="hljs-attr">value</span>: <span class="hljs-string">'审批驳回'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">        },</span>
<span class="code-block-extension-codeLine" data-line-num="14">        {</span>
<span class="code-block-extension-codeLine" data-line-num="15">            <span class="hljs-attr">text</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="16">            <span class="hljs-attr">value</span>: <span class="hljs-string">'申请中'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="17">        },</span>
<span class="code-block-extension-codeLine" data-line-num="18">        {</span>
<span class="code-block-extension-codeLine" data-line-num="19">            <span class="hljs-attr">text</span>: <span class="hljs-string">'已解除'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="20">            <span class="hljs-attr">value</span>: <span class="hljs-string">'已解除'</span></span>
<span class="code-block-extension-codeLine" data-line-num="21">        },</span>
<span class="code-block-extension-codeLine" data-line-num="22">      ],</span>
<span class="code-block-extension-codeLine" data-line-num="23">},</span>
</code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c402b1fffa904b7f8afe14bf65b2608f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2300&amp;h=1260&amp;s=203341&amp;e=png&amp;b=fefefe" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/196a7bc2137d45d285937014f65aaa27~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2190&amp;h=872&amp;s=147630&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>然后加上右边的按钮：</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c79f1e767abe4cda85452405837e5b95~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1380&amp;h=1200&amp;s=243855&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-attr">title</span>: <span class="hljs-string">'操作'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (</span>
<span class="code-block-extension-codeLine" data-line-num="4">        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="5">            <span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="6">                <span class="hljs-attr">title</span>=<span class="hljs-string">"通过申请"</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">                <span class="hljs-attr">description</span>=<span class="hljs-string">"确认通过吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">                <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; changeStatus(record.id, 'apply')}</span>
<span class="code-block-extension-codeLine" data-line-num="9">                okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="10">                cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="11">            &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="12">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>通过<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="13">            <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="14">            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="15">            <span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="16">                <span class="hljs-attr">title</span>=<span class="hljs-string">"驳回申请"</span></span>
<span class="code-block-extension-codeLine" data-line-num="17">                <span class="hljs-attr">description</span>=<span class="hljs-string">"确认驳回吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="18">                <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; changeStatus(record.id, 'reject')}</span>
<span class="code-block-extension-codeLine" data-line-num="19">                okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="20">                cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="21">            &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="22">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>驳回<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">            <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="24">            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="25">            <span class="hljs-tag">&lt;<span class="hljs-name">Popconfirm</span></span></span>
<span class="code-block-extension-codeLine" data-line-num="26">                <span class="hljs-attr">title</span>=<span class="hljs-string">"解除申请"</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">                <span class="hljs-attr">description</span>=<span class="hljs-string">"确认解除吗？"</span></span>
<span class="code-block-extension-codeLine" data-line-num="28">                <span class="hljs-attr">onConfirm</span>=<span class="hljs-string">{()</span> =&gt; changeStatus(record.id, 'unbind')}</span>
<span class="code-block-extension-codeLine" data-line-num="29">                okText="Yes"</span>
<span class="code-block-extension-codeLine" data-line-num="30">                cancelText="No"</span>
<span class="code-block-extension-codeLine" data-line-num="31">            &gt;  </span>
<span class="code-block-extension-codeLine" data-line-num="32">                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>解除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="33">            <span class="hljs-tag">&lt;/<span class="hljs-name">Popconfirm</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="34">            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="35">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="36">    )</span>
<span class="code-block-extension-codeLine" data-line-num="37">}</span>
</code></pre>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">复制代码</div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeStatus</span>(<span class="hljs-params">id: number, status: <span class="hljs-string">'apply'</span> | <span class="hljs-string">'reject'</span> | <span class="hljs-string">'unbind'</span></span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-keyword">const</span> methods = {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        apply,</span>
<span class="code-block-extension-codeLine" data-line-num="4">        reject,</span>
<span class="code-block-extension-codeLine" data-line-num="5">        unbind</span>
<span class="code-block-extension-codeLine" data-line-num="6">    }</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> methods[status](id);</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-keyword">if</span>(res.<span class="hljs-property">status</span> === <span class="hljs-number">201</span> || res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        message.<span class="hljs-title function_">success</span>(<span class="hljs-string">'状态更新成功'</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="11">        <span class="hljs-title function_">setNum</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>());</span>
<span class="code-block-extension-codeLine" data-line-num="12">    } <span class="hljs-keyword">else</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        message.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);</span>
<span class="code-block-extension-codeLine" data-line-num="14">    }</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
</code></pre>
<p>更新完状态之后要触发列表的重新渲染，所以这里用 setNum 触发：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8447351d611745bc830cb92864da93bb~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1100&amp;h=406&amp;s=120675&amp;e=png&amp;b=202020" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/462d2673706749b197e1711ef581f279~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=2808&amp;h=1382&amp;s=1799861&amp;e=gif&amp;f=37&amp;b=fdfdfd" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>这样，预定管理的功能就完成了。</p>
<p>案例代码上传了<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fmeeting_room_booking_system_frontend_admin" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/meeting_room_booking_system_frontend_admin" ref="nofollow noopener noreferrer">小册仓库</a></p>
<h2 data-id="heading-0">总结</h2>
<p>这节我们实现了预订管理的管理端的前端页面，主要是列表和修改状态的接口。</p>
<p>要注意的是时间相关的处理，antd 只有 DatePicker 和 TimePicker，我们要添加 2 个字段接收，然后调用接口的时候把它们合并成一个字段。</p>
<p>下节我们来写用户端的部分。</p></div>